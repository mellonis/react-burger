(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{12:function(e,t,n){"use strict";var r,a,c,s;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s})),function(e){e.top="top",e.bottom="bottom"}(r||(r={})),function(e){e.ingredient="ingredient",e.actualIngredient="actualIngredient"}(a||(a={})),function(e){e.bun="bun",e.sauce="sauce",e.main="main"}(c||(c={})),function(e){e.created="created",e.pending="pending",e.done="done"}(s||(s={}))},125:function(e,t,n){e.exports={"order-status":"style_order-status__2JeIy","order-status_done":"style_order-status_done__1xhid"}},130:function(e,t,n){e.exports={"modal-overlay":"style_modal-overlay__v0yzo","modal-overlay_interactive":"style_modal-overlay_interactive__1pDN1"}},132:function(e,t,n){e.exports={"menu-item":"style_menu-item__3CXGR"}},173:function(e,t,n){e.exports={feed:"style_feed__3FRNS"}},178:function(e,t,n){e.exports={"burger-ingredient-type":"style_burger-ingredient-type__MQwyq","burger-ingredient-type__ingredient-list":"style_burger-ingredient-type__ingredient-list__lsh46","burger-ingredient-type__ingredient-details":"style_burger-ingredient-type__ingredient-details__3Z88b"}},179:function(e,t,n){e.exports={"app-body":"style_app-body__2ijFH"}},180:function(e,t,n){e.exports={app:"style_app__1uR4E"}},21:function(e,t,n){e.exports={page:"page-style_page__3yGBB"}},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return g})),n.d(t,"c",(function(){return O})),n.d(t,"k",(function(){return h})),n.d(t,"a",(function(){return d}));var r=n(29),a=n(5),c=n.n(a),s=n(13),i=n(8),o=n(12),d="https://norma.nomoreparties.space",u=function(e){var t=e.accessToken,n=e.refreshToken,r=t.split(" "),a=Object(i.a)(r,2);return{accessSchema:a[0],accessToken:a[1],refreshToken:n}},l=function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/api/ingredients"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(!0!==(n=e.sent).success){e.next=10;break}return e.abrupt("return",n.data);case 10:throw new Error("Can't get data from server");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,s,i,o,l,_;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.next=3,fetch("".concat(d,"/api/auth/login"),{body:JSON.stringify({email:n,password:a}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return s=e.sent,e.next=6,s.json();case 6:if(!0===(i=e.sent).success){e.next=9;break}throw new Error("Can't get data from server");case 9:return o=i.user,l=o.email,_=o.name,e.abrupt("return",Object(r.a)(Object(r.a)({},u(i)),{},{user:{email:l,name:_}}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.refreshToken,e.next=3,fetch("".concat(d,"/api/auth/logout"),{body:JSON.stringify({token:n}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!0===e.sent.success){e.next=9;break}throw new Error("Can't get data from server");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,s,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ingredients,r=t.auth,a=r.accessSchema,s=r.accessToken,e.next=3,fetch("".concat(d,"/api/orders"),{body:JSON.stringify({ingredients:n}),headers:new Headers([["Content-Type","application/json"],["Authorization","".concat(a," ").concat(s)]]),method:"POST"});case 3:return i=e.sent,e.next=6,i.json();case 6:if(!0!==(u=e.sent).success){e.next=11;break}return e.abrupt("return",{id:u.order.number,message:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438",status:o.d.pending});case 11:throw new Error("Can't get data from server");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.refreshToken,e.next=3,fetch("".concat(d,"/api/auth/token"),{body:JSON.stringify({token:n}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!0!==(a=e.sent).success){e.next=11;break}return e.abrupt("return",u(a));case 11:throw new Error("Can't get data from server");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,s,o,u,l,_,p,j,b,m,f,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.name,a=t.password,e.next=3,fetch("".concat(d,"/api/auth/register"),{body:JSON.stringify({email:n,name:r,password:a}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return s=e.sent,e.next=6,s.json();case 6:if(!0===(o=e.sent).success){e.next=9;break}throw new Error("Can't get data from server");case 9:return u=o.accessToken,l=o.refreshToken,_=o.user,p=_.email,j=_.name,b=u.split(" "),m=Object(i.a)(b,2),f=m[0],g=m[1],e.abrupt("return",{accessSchema:f,accessToken:g,refreshToken:l,user:{email:p,name:j}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,e.next=3,fetch("".concat(d,"/api/password-reset"),{body:JSON.stringify({email:n}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!0===e.sent.success){e.next=9;break}throw new Error("Can't get data from server");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.password,r=t.token,e.next=3,fetch("".concat(d,"/api/password-reset/reset"),{body:JSON.stringify({password:n,token:r}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return a=e.sent,e.next=6,a.json();case 6:if(!0===e.sent.success){e.next=9;break}throw new Error("Can't get data from server");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=n.accessSchema,a=n.accessToken,e.next=3,fetch("".concat(d,"/api/auth/user"),{headers:new Headers([["Content-Type","application/json"],["Authorization","".concat(r," ").concat(a)]]),method:"GET"});case 3:return s=e.sent,e.next=6,s.json();case 6:if(!0===(i=e.sent).success){e.next=9;break}throw new Error("Can't get data from server");case 9:return e.abrupt("return",i.user);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,s,i,o,u,l,_;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=n.accessSchema,a=n.accessToken,s=t.data,i=s.email,o=s.name,u=s.password,e.next=3,fetch("".concat(d,"/api/auth/user"),{body:JSON.stringify({name:o,email:i,password:u}),headers:new Headers([["Content-Type","application/json"],["Authorization","".concat(r," ").concat(a)]]),method:"PATCH"});case 3:return l=e.sent,e.next=6,l.json();case 6:if(!0===(_=e.sent).success){e.next=9;break}throw new Error("Can't get data from server");case 9:return e.abrupt("return",{user:_.user});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},3:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var r,a=n(9),c=n(12),s=(r={},Object(a.a)(r,c.d.created,"\u0421\u043e\u0437\u0434\u0430\u043d"),Object(a.a)(r,c.d.pending,"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),Object(a.a)(r,c.d.done,"\u0413\u043e\u0442\u043e\u0432"),r),i={assembleABurger:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440",bottom:"\u043d\u0438\u0437",buns:"\u0411\u0443\u043b\u043a\u0438",burgerFillings:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",calories:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",carbohydrates:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",constructor:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",fat:"\u0416\u0438\u0440\u044b, \u0433",ingredientDetails:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",orderDetails:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435",orderId:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430",orderIngredients:"\u0421\u043e\u0441\u0442\u0430\u0432",orderList:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",ordersTotalCount:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f",ordersTodayTotalCount:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f",placeAnOrder:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437",profile:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",proteins:"\u0411\u0435\u043b\u043a\u0438, \u0433",sauces:"\u0421\u043e\u0443\u0441\u044b",top:"\u0432\u0435\u0440\u0445",noInformation:"\u041d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",forms:{__common__:{__errors__:{required:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",passwordLength:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},doHidePassword:"\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",doLogin:"\u0412\u043e\u0439\u0442\u0438",doRegister:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",doShowPassword:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",email:"E-mail",haveYouRememberedYourPassword:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",name:"\u0418\u043c\u044f",password:"\u041f\u0430\u0440\u043e\u043b\u044c",resetForm:"\u041e\u0442\u043c\u0435\u043d\u0430"},forgotPassword:{doResetPassword:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",provideYourEmail:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"},login:{areYouForgetYourPassword:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",areYouTheNewUser:"\u0412\u044b \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",doResetYourPassword:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",title:"\u0412\u0445\u043e\u0434"},profile:{doEdit:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",email:"\u041b\u043e\u0433\u0438\u043d"},register:{areYouRegisteredAlready:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},resetPassword:{doReset:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",provideApprovalCode:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",provideYourNewPassword:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}}}},30:function(e,t,n){e.exports={"burger-constructor":"style_burger-constructor__3a8p5","burger-constructor_is-request":"style_burger-constructor_is-request__2YFBf",placingOrder:"style_placingOrder__1cLXy","burger-constructor_is-empty":"style_burger-constructor_is-empty__1F7G8","burger-constructor__list":"style_burger-constructor__list__oWYKC","burger-constructor_is-can-drop":"style_burger-constructor_is-can-drop__QK3ua","burger-constructor_is-drag-over":"style_burger-constructor_is-drag-over__--itU","burger-constructor__filling":"style_burger-constructor__filling__2agyk","burger-constructor__total-wrapper":"style_burger-constructor__total-wrapper__21Smn","burger-constructor__order-details":"style_burger-constructor__order-details__12HWu"}},372:function(e,t,n){},373:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(90),i=n.n(s),o=n(79),d=n(20),u=n(4),l=n(7),_=n(2),p=n.n(_),j=n(22),b=n(3),m=n(8),f=n(10),g=n(12),O=function(e){var t=e.limit,n=void 0===t?1/0:t,r=e.order,c=Object(l.c)((function(e){return e.burger.idToIngredientMap}));return Object(a.useMemo)((function(){if(!r)return{ingredientQuantityPairs:[],moreIngredientsCount:0,totalPrice:0};var e=r.ingredients.map((function(e){return c[e]}));if(e.some((function(e){return null==e})))return{ingredientQuantityPairs:[],isItValid:!1,moreIngredientsCount:e.length,totalPrice:NaN};var t=function(e){var t=e.find((function(e){return e.type===g.c.bun})),n=e.filter((function(e){return e.type!==g.c.bun})),r=new Map;return t&&r.set(t,2),n.forEach((function(e){r.has(e)||r.set(e,0);var t=r.get(e);r.set(e,t+1)})),Object(f.a)(r.entries())}(e);return{ingredientQuantityPairs:t.slice(0,n),isItValid:!0,moreIngredientsCount:n<t.length?t.length-n:0,totalPrice:t.reduce((function(e,t){var n=Object(m.a)(t,2);return e+n[0].price*n[1]}),0)}}),[c,n,r])},h=n(384),x=n(385),v=function(e){return Object(h.a)(new Date(e),new Date,{locale:x.a})},y=n(9),w=n(17),N=n(80),C=n.n(N),k=n(0),T=function(e){var t,n=e.amount,r=e.className,a=e.isTotal;return Object(k.jsxs)("div",{className:p()(C.a.amount,"text",(t={},Object(y.a)(t,C.a.amount_type_total,a),Object(y.a)(t,"text_type_digits-default",!a),Object(y.a)(t,"text_type_digits-medium",a),t),r),children:[Object(k.jsx)("div",{className:C.a.amount__amount,children:n}),Object(k.jsx)("div",{className:C.a["amount__currency-wrapper"],children:Object(k.jsx)(w.CurrencyIcon,{type:"primary"})})]})},I=n(125),P=n.n(I),S="order-status",E=function(e){var t=e.status;return Object(k.jsx)("div",{className:p()(P.a["order-status"],Object(y.a)({},P.a["".concat(S,"_").concat(g.d.done)],t===g.d.done)),children:b.b[t]})},D=n(96),R=n.n(D);!function(e){e.div="div",e.li="li"}(r||(r={}));var A="ingredient-icon",L=function(e){var t=e.className,n=e.ingredient,r=e.moreIngredientsCount,a=e.tag;return Object(k.jsxs)(a,{className:p()(R.a["ingredient-icon"],t),children:[Object(k.jsx)("img",{alt:n.name,className:R.a["".concat(A,"__image")],src:n.image}),r?Object(k.jsxs)("div",{className:p()(R.a["".concat(A,"__more-ingredients-count")],"text text_type_digits-default text_type_main-medium"),children:["+",r]}):null]})};L.defaultProps={tag:r.div};var F=n(97),M=n.n(F),q="ingredient-and-price",U=function(e){var t=e.ingredient,n=e.quantity;return Object(k.jsxs)("li",{className:p()(M.a["ingredient-and-price"],"mr-6"),children:[Object(k.jsx)(L,{ingredient:t}),Object(k.jsx)("div",{className:"pl-4"}),Object(k.jsx)("div",{children:t.name}),Object(k.jsx)("div",{className:"pl-4"}),Object(k.jsxs)("div",{className:M.a["".concat(q,"__quantity-and-price-wrapper")],children:[Object(k.jsxs)("div",{className:M.a["".concat(q,"__quantity")],children:[n," x"," "]}),Object(k.jsx)(T,{amount:t.price*n})]})]})},Y=n(59),B=n.n(Y),H="order-details",V=function(){var e=Object(j.i)().id,t=Object(l.c)((function(e){return e.orders.orders})).find((function(t){var n=t._id;return e===n})),n=O({order:t}),r=n.ingredientQuantityPairs,a=n.isItValid,s=n.totalPrice;return t?Object(k.jsxs)("div",{className:B.a["order-details"],children:[Object(k.jsxs)("div",{className:p()(B.a["".concat(H,"__number")],"text text_type_digits-default"),children:["#",t.number]}),Object(k.jsx)("div",{className:"pt-10"}),Object(k.jsx)("div",{className:"text text_type_main-medium",children:t.name}),Object(k.jsx)("div",{className:"pt-3"}),Object(k.jsx)(E,{status:t.status}),Object(k.jsx)("div",{className:"pt-15"}),Object(k.jsxs)("div",{className:"text text_type_main-medium",children:[b.a.orderIngredients,":"]}),Object(k.jsx)("div",{className:"pt-6"}),a?Object(k.jsx)("ul",{className:p()(B.a["".concat(H,"__ingredients")],"custom-scroll"),children:r.map((function(e,t){var n=Object(m.a)(e,2),a=n[0],s=n[1];return Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(U,{ingredient:a,quantity:s}),t+1<r.length?Object(k.jsx)("div",{className:"pt-4"}):null]},t)}))}):Object(k.jsx)("div",{className:"text text_color_error",children:b.a.noInformation}),Object(k.jsx)("div",{className:"pt-10"}),Object(k.jsxs)("div",{className:p()(B.a["".concat(H,"__date-and-price-wrapper")],"mr-6"),children:[Object(k.jsx)("div",{className:p()(B.a["".concat(H,"__date")],"text text_color_inactive"),children:v(t.createdAt)}),a?Object(k.jsx)("div",{className:B.a["".concat(H,"__price")],children:Object(k.jsx)(T,{amount:s})}):null]})]}):null},J=n(44),G=n.n(J),z="feed-activity",Q=function(e){var t=e.className,n=e.orders,r=e.total,s=e.totalToday,i=Object(a.useMemo)((function(){return n.reduce((function(e,t){var n=t.status;return e.hasOwnProperty(n)||(e[n]=[]),e[n].push(t),e}),{})}),[n]),o=[g.d.created,g.d.pending,g.d.done].reduce((function(e,t){var n=i[t];return e[t]=Object(a.useMemo)((function(){return n?[n.slice(0,5),n.slice(5,10)].map((function(e,t){return e.length>0?Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("ul",{className:p()(G.a["".concat(z,"__orders")],"text text_type_digits-default"),children:e.map((function(e,t){var n=e._id,r=e.number;return Object(k.jsxs)(c.a.Fragment,{children:[t>0?Object(k.jsx)("div",{className:"pt-2"}):null,Object(k.jsx)("li",{className:p()(G.a["".concat(z,"__order")]),children:r})]},n)}))},t)},t):null})):null}),[n]),e}),{});return Object(k.jsxs)("div",{className:p()(G.a["feed-activity"],"custom-scroll",t),children:[Object(k.jsx)("div",{className:G.a["".concat(z,"__orders-by-status")],children:[g.d.done,g.d.pending].map((function(e,t){return Object(k.jsxs)(c.a.Fragment,{children:[t>0?Object(k.jsx)("div",{className:"pb-6"}):null,Object(k.jsxs)("div",{className:p()(G.a["".concat(z,"__orders-list")],G.a["".concat(z,"__orders-list_").concat(e)]),children:[Object(k.jsxs)("div",{className:"pb-6",children:[b.b[e],":"]}),Object(k.jsx)("div",{className:G.a["".concat(z,"__orders-wrapper")],children:o[e]})]})]},e)}))}),r?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"pt-15"}),Object(k.jsxs)("div",{className:"text text_type_main-medium",children:[b.a.ordersTotalCount,":"]}),Object(k.jsx)("div",{className:p()(G.a["".concat(z,"__orders-total-count")],"text text_type_digits-large"),children:r})]}):null,s?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"pt-15"}),Object(k.jsxs)("div",{className:"text text_type_main-medium",children:[b.a.ordersTodayTotalCount,":"]}),Object(k.jsx)("div",{className:p()(G.a["".concat(z,"__orders-total-count")],"text text_type_digits-large"),children:s})]}):null]})},W=n(81),K=n.n(W),X="ingredients-and-price",Z=function(e){var t=e.order,n=O({limit:6,order:t}),a=n.ingredientQuantityPairs,c=n.isItValid,s=n.moreIngredientsCount,i=n.totalPrice;return Object(k.jsx)("div",{className:K.a["ingredients-and-price"],children:c?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("ul",{className:K.a["".concat(X,"__ingredients")],children:a.map((function(e,t){var n=Object(m.a)(e,1)[0];return Object(k.jsx)(L,{className:K.a["".concat(X,"__ingredient")],ingredient:n,moreIngredientsCount:s>0&&t+1===6?s:void 0,tag:r.li},n._id)}))}),Object(k.jsx)("div",{className:"pl-6"}),Object(k.jsx)("div",{className:K.a["".concat(X,"__price")],children:Object(k.jsx)(T,{amount:i})})]}):Object(k.jsx)("div",{className:"text text_color_error",children:b.a.noInformation})})},$=n(68),ee=n.n($),te="order",ne=function(e){var t=e.order,n=e.renderStatus,r=Object(j.h)(),a=Object(j.g)();return Object(k.jsxs)("li",{className:p()(ee.a.order,"p-6 mr-2"),onClick:function(){a.push({pathname:"/feed/".concat(t._id),state:{backgroundPageLocation:r}})},children:[Object(k.jsxs)("div",{className:ee.a["".concat(te,"__number-and-date-wrapper")],children:[Object(k.jsxs)("div",{className:p()(ee.a["".concat(te,"__number")],"text text_type_digits-default"),children:["#",t.number]}),Object(k.jsx)("div",{className:p()(ee.a["".concat(te,"__date")],"text text_color_inactive"),children:v(t.createdAt)})]}),Object(k.jsx)("div",{className:p()(ee.a["".concat(te,"__title")],"pt-6 text text_type_main-medium"),children:t.name}),n?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"pt-2"}),Object(k.jsx)(E,{status:t.status})]}):null,Object(k.jsx)("div",{className:"pt-6"}),Object(k.jsx)(Z,{order:t})]})};ne.defaultProps={renderStatus:!1};var re=n(173),ae=n.n(re),ce=function(e){var t=e.className,n=e.orders,r=e.renderStatus;return Object(k.jsx)("ul",{className:p()(ae.a.feed,"custom-scroll",t),children:n.map((function(e,t){return Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(ne,{order:e,renderStatus:r}),t+1<n.length?Object(k.jsx)("div",{className:"pt-4"}):null]},e._id)}))})};ce.defaultProps={renderStatus:!1};var se,ie=n(60),oe=n.n(ie),de="feed-page",ue=function(){var e=Object(l.c)((function(e){return e.orders})),t=e.orders,n=e.total,r=e.totalToday;return 0===t.length?null:Object(k.jsxs)("div",{className:oe.a["feed-page"],children:[Object(k.jsxs)("div",{className:p()(oe.a["".concat(de,"__feed-wrapper")],"pt-10  pb-5"),children:[Object(k.jsx)("div",{className:p()(oe.a["".concat(de,"__title")],"text text_type_main-large  pb-5"),children:b.a.orderList}),Object(k.jsx)(ce,{className:oe.a["".concat(de,"__feed")],orders:t})]}),Object(k.jsx)("div",{className:p()(oe.a["".concat(de,"__space")],"pl-15")}),Object(k.jsx)("div",{className:p()(oe.a["".concat(de,"__activity")],"pt-25 pb-5 text"),children:Object(k.jsx)(Q,{orders:t,total:n,totalToday:r})})]})},le=function(){var e=Object(j.j)().path;return Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{exact:!0,path:"".concat(e),children:Object(k.jsx)(ue,{})}),Object(k.jsx)(j.b,{path:"".concat(e,"/:id"),children:Object(k.jsx)(V,{})}),Object(k.jsx)(j.b,{children:Object(k.jsx)(j.a,{to:e})})]})},_e=n(184),pe=n(41),je=n(99),be=function(e,t){var n=e.title,r=e.url,a=e.urlTitle;return Object(k.jsxs)(c.a.Fragment,{children:[t>0?Object(k.jsx)("div",{className:"pt-4"}):null,Object(k.jsxs)("div",{children:[Object(k.jsx)("span",{dangerouslySetInnerHTML:{__html:n}}),"\xa0",Object(k.jsx)(d.b,{to:r,dangerouslySetInnerHTML:{__html:a}})]})]},t)};!function(e){e.input="input",e.passwordInput="passwordInput"}(se||(se={}));var me=function(e,t){var n;switch(e.componentType){case se.input:var r=e.icon,a=e.name,s=e.placeholder,i=e.type,o=void 0===i?"text":i;n=Object(k.jsx)(pe.a,{control:this,name:a,render:function(e){var t=e.field,n=t.onChange,a=t.value;return Object(k.jsx)(w.Input,{icon:r,onChange:n,placeholder:s,type:o,value:a})}});break;case se.passwordInput:var d=e.name;n=Object(k.jsx)(pe.a,{control:this,name:d,render:function(e){var t=e.field,n=t.onChange,r=t.value;return Object(k.jsx)(w.PasswordInput,{name:d,onChange:n,value:r})}})}return Object(k.jsxs)(c.a.Fragment,{children:[t>0?Object(k.jsx)("div",{className:"pt-6"}):null,n]},t)},fe=n(45),ge=n.n(fe),Oe=function(e){var t=e.additionalActions,n=e.buttonTitle,r=e.inputDeclarations,c=e.isButtonHiddenOnNotModifiedForm,s=e.onSubmit,i=e.resetButtonTitle,o=e.showErrors,d=e.title,u=Object(a.useRef)(null),l=Object(a.useMemo)((function(){return je.a().shape(r.reduce((function(e,t){return Object.assign(e,Object(y.a)({},t.name,function(){var e;return t.componentType===se.passwordInput||"password"===t.name?je.b().min(6,"".concat(b.a.forms.__common__.__errors__.passwordLength," (").concat(null!==(e=t.placeholder)&&void 0!==e?e:t.name,")")):je.b().required("".concat(b.a.forms.__common__.__errors__.required," (").concat(t.placeholder,")"))}()))}),{}))}),[r]),_=Object(pe.e)({defaultValues:r.reduce((function(e,t){var n=t.name,r=t.initialValue;return Object.assign(e,Object(y.a)({},n,null!==r&&void 0!==r?r:""))}),{}),mode:"onSubmit",resolver:Object(_e.a)(l)}),j=_.control,f=_.handleSubmit,g=_.formState,O=g.errors,h=g.isDirty,x=_.reset,v=Object(a.useCallback)((function(e){console.error(e)}),[]),N=Object(a.useCallback)((function(){var e=u.current;if(e){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];s.apply(null,n)}}),[s]),C=Object(a.useCallback)((function(){var e=u.current;e&&e.dispatchEvent(new Event("submit"))}),[]),T=n&&(!c||c&&h),I=i&&h;return Object(k.jsxs)("form",{ref:u,className:ge.a.form,onSubmit:f(N,v),children:[d?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:ge.a.form__header,dangerouslySetInnerHTML:{__html:d}}),Object(k.jsx)("div",{className:"pt-6"})]}):null,Object(k.jsx)("div",{className:ge.a.form__body,children:r.map(me,j)}),h&&o&&Object.keys(O).length>0?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"pt-6"}),Object(k.jsx)("ul",{className:p()(ge.a.form__errors,"text_color_error"),children:Object.entries(O).sort((function(e,t){var n=Object(m.a)(e,1)[0],r=Object(m.a)(t,1)[0];return n.localeCompare(r)})).map((function(e){var t,n=Object(m.a)(e,2),r=n[0],a=n[1];return Object(k.jsx)("li",{className:ge.a.form__error,children:null!==(t=null===a||void 0===a?void 0:a.message)&&void 0!==t?t:"unknown"},r)}))})]}):null,T||I?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"pt-6"}),Object(k.jsxs)("div",{className:ge.a["form__buttons-container"],children:[T?Object(k.jsx)("div",{className:ge.a["form__button-wrapper"],children:Object(k.jsx)(w.Button,{type:"primary",onClick:C,children:n})}):null,T&&I?Object(k.jsx)("div",{className:"pl-6"}):null,I?Object(k.jsx)("div",{className:ge.a["form__button-wrapper"],children:Object(k.jsx)(w.Button,{type:"primary",onClick:function(){return x()},children:i})}):null]})]}):null,t?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"pt-20"}),Object(k.jsx)("div",{className:p()(ge.a["form__additional-actions"],"text_color_inactive"),children:t.map(be)})]}):null]})};Oe.defaultProps={isButtonHiddenOnNotModifiedForm:!1,showErrors:!1};var he=n(21),xe=n.n(he),ve="forgot-password-page",ye=[{title:b.a.forms.__common__.haveYouRememberedYourPassword,url:"/login",urlTitle:b.a.forms.__common__.doLogin}],we=[{componentType:se.input,name:"email",placeholder:b.a.forms.forgotPassword.provideYourEmail,type:"email"}],Ne=function(){var e=Object(l.c)((function(e){return e.user})),t=e.userLoginPhase,n=e.passwordResettingPhase,r=Object(l.b)();return[u.d.fulfilled].includes(t)?Object(k.jsx)(j.a,{to:"/"}):[u.b.requestingCredentialsFromUser,u.b.pendingResetting,u.b.fulfilled].includes(n)?Object(k.jsx)(j.a,{to:"/reset-password"}):Object(k.jsx)("div",{className:p()(xe.a.page,xe.a["page_".concat(ve)],ve),children:Object(k.jsx)(Oe,{additionalActions:ye,buttonTitle:b.a.forms.forgotPassword.doResetPassword,inputDeclarations:we,onSubmit:function(e){var t=e.email;n===u.b.initial&&r(Object(u.v)({email:t}))},title:b.a.forms.forgotPassword.title})})},Ce=n(47),ke=n.n(Ce),Te=function(e){var t=e.className,n=Object(j.i)().id,r=Object(l.c)((function(e){return e.burger})).idToIngredientMap[n],s=r.calories,i=r.carbohydrates,o=r.fat,d=r.proteins,u=r.image,_=r.name,f=Object(a.useMemo)((function(){return{calories:s,carbohydrates:i,fat:o,proteins:d}}),[s,i,o,d]);return Object(k.jsxs)("div",{className:p()(ke.a["ingredient-details"],"mb-5",t),children:[Object(k.jsx)("div",{className:p()(ke.a["ingredient-details__picture-wrapper"],"pl-5 pr-5"),children:Object(k.jsx)("img",{alt:_,className:ke.a["ingredient-details__picture"],src:u})}),Object(k.jsx)("div",{className:"pt-4"}),Object(k.jsx)("div",{className:p()(ke.a["ingredient-details__title"],"text text_type_main-medium"),children:_}),Object(k.jsx)("div",{className:"pt-8"}),Object(k.jsx)("div",{className:p()(ke.a["ingredient-details__nutritional-values"],"text_color_inactive"),children:Object.entries(f).map((function(e,t,n){var r=Object(m.a)(e,2),a=r[0],s=r[1];return Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsxs)("div",{className:ke.a["ingredient-details__nutritional-value"],children:[Object(k.jsx)("div",{className:ke.a["ingredient-details__nutritional-value-title"],children:b.a[a]}),Object(k.jsx)("div",{className:p()(ke.a["ingredient-details__nutritional-value-value"],"text text_type_digits-default pt-2"),children:s})]}),t+1<n.length?Object(k.jsx)("div",{className:"pl-5"}):null]},a)}))})]})},Ie="ingredients-page",Pe=function(){var e=Object(j.j)().params.id,t=Object(l.c)((function(e){return e.burger})),n=t.idToIngredientMap;return t.ingredientsRequest?null:n[e]?Object(k.jsx)("div",{className:p()(xe.a.page,xe.a["page_".concat(Ie)],Ie),children:Object(k.jsx)(Te,{})}):Object(k.jsx)(j.a,{to:"/"})},Se="login-page",Ee=[{title:b.a.forms.login.areYouTheNewUser,url:"/register",urlTitle:b.a.forms.__common__.doRegister},{title:b.a.forms.login.areYouForgetYourPassword,url:"/forgot-password",urlTitle:b.a.forms.login.doResetYourPassword}],De=[{componentType:se.input,name:"email",placeholder:b.a.forms.__common__.email,type:"email"},{componentType:se.passwordInput,name:"password"}],Re=function(){var e=Object(l.c)((function(e){return e.user})).userLoginPhase,t=Object(l.b)(),n=Object(j.h)().state,r=(n=void 0===n?{}:n).redirectedFrom,c=void 0===r?"/":r;return Object(a.useEffect)((function(){return function(){[u.d.rejected].includes(e)&&t(Object(u.l)())}}),[t,e]),[u.d.fulfilled].includes(e)?Object(k.jsx)(j.a,{to:c}):Object(k.jsx)("div",{className:p()(xe.a.page,xe.a["page_".concat(Se)],Se),children:Object(k.jsx)(Oe,{additionalActions:Ee,inputDeclarations:De,buttonTitle:b.a.forms.__common__.doLogin,onSubmit:function(n){var r=n.email,a=n.password;[u.d.initial,u.d.rejected].includes(e)&&t(Object(u.n)({email:r,password:a}))},title:b.a.forms.login.title})})},Ae=function(){var e=Object(l.c)((function(e){return e.user})).userLoginPhase,t=Object(l.b)();return Object(a.useEffect)((function(){e===u.d.fulfilled&&t(Object(u.o)())})),[u.d.initial,u.d.pending,u.d.rejected].includes(e)?Object(k.jsx)(j.a,{to:"/login"}):null},Le=n(383),Fe=n(181),Me=n(377),qe=n(98),Ue=n(30),Ye=n.n(Ue),Be=function(e){var t,n=e.className,r=Object(l.c)((function(e){return e.burger})),c=r.actualIngredients,s=r.idToIngredientMap,i=r.orderDetailsRequest,o=r.totalAmount,d=Object(l.c)((function(e){return e.user})).user,_=Object(l.b)(),f=Object(j.h)(),O=Object(j.g)(),h=c.slice(0,1)[0],x=c.slice(-1)[0],v=Object(a.useCallback)((function(){d?i||_(Object(u.r)(c.map((function(e){return e.refId})))):O.replace("/login")}),[c,_,O,i,d]),N=Object(Me.a)({accept:g.b.ingredient,canDrop:function(e,t){return!(0===c.length&&t.getItemType()===g.b.ingredient&&e.type!==g.c.bun)},drop:function(e){var t=e.refId;i||_(Object(u.f)(s[t]))},collect:function(e){return{isCanDrop:e.canDrop()&&!i,isDragOver:e.isOver()}}}),C=Object(m.a)(N,2),I=C[0],P=I.isCanDrop,S=I.isDragOver,E=C[1];return Object(k.jsxs)("div",{className:p()(Ye.a["burger-constructor"],"pt-25 pb-5",(t={},Object(y.a)(t,Ye.a["burger-constructor_is-empty"],0===c.length),Object(y.a)(t,Ye.a["burger-constructor_is-can-drop"],P),Object(y.a)(t,Ye.a["burger-constructor_is-drag-over"],S),Object(y.a)(t,Ye.a["burger-constructor_is-request"],i),t),n),children:[Object(k.jsxs)("div",{ref:E,className:Ye.a["burger-constructor__list"],children:[h&&Object(k.jsxs)(k.Fragment,{children:[function(){var e=h.isLocked,t=void 0!==e&&e,n=h.refId,r=h.type,a=s[n];return a&&Object(k.jsx)(qe.a,{ingredient:s[n],isLocked:t,onShowIngredientInfo:function(){O.push({pathname:"/ingredients/".concat(a._id),state:{backgroundPageLocation:f}})},type:r})}(),Object(k.jsx)("div",{className:"pt-4"})]}),Object(k.jsx)("div",{className:p()(Ye.a["burger-constructor__filling"],"custom-scroll"),children:c.slice(1,-1).map((function(e,t){var n=e.id,r=e.isLocked,a=void 0!==r&&r,c=e.refId,i=e.type,o=s[c];return o&&Object(k.jsx)(qe.a,{id:n,index:t+1,ingredient:s[c],isLocked:a,onShowIngredientInfo:function(){O.push({pathname:"/ingredients/".concat(o._id),state:{backgroundPageLocation:f}})},onDelete:function(){_(Object(u.t)(n))},type:i},n)}))}),x&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"pt-4"}),function(){var e=x.isLocked,t=void 0!==e&&e,n=x.refId,r=x.type,a=s[n];return a&&Object(k.jsx)(qe.a,{ingredient:s[n],isLocked:t,onShowIngredientInfo:function(){O.push({pathname:"/ingredients/".concat(a._id),state:{backgroundPageLocation:f}})},type:r})}()]})]}),Object(k.jsxs)("div",{className:p()(Ye.a["burger-constructor__total-wrapper"],"pt-10"),children:[Object(k.jsx)(T,{amount:o,className:Ye.a["burger-constructor__total"],isTotal:!0}),Object(k.jsx)("div",{className:"pl-10"}),Object(k.jsx)(w.Button,{onClick:v,size:"large",type:"primary",children:b.a.placeAnOrder})]})]})},He=n(376),Ve=n(374),Je=n(53),Ge=n.n(Je),ze=function(e){var t,n=e.ingredient,r=n._id,a=n.image,c=n.name,s=n.price,i=n.type,o=e.onClick,d=Object(l.c)((function(e){return e.burger})).idToActualIngredientsCountMap,u=Object(He.a)({type:g.b.ingredient,options:{dropEffect:"copy"},item:{refId:r,type:i},collect:function(e){return{isItPicked:e.isDragging()}}}),_=Object(m.a)(u,3),j=_[0].isItPicked,b=_[1],f=_[2];return Object(k.jsxs)("li",{ref:b,className:p()(Ge.a["burger-ingredient"],(t={},Object(y.a)(t,Ge.a["burger-ingredient_interactive"],o),Object(y.a)(t,Ge.a["burger-ingredient_is-picked"],j),t)),onClick:o,children:[Object(k.jsx)(Ve.a,{connect:f,src:a}),d[r]&&Object(k.jsx)(w.Counter,{count:d[r]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:p()(Ge.a["burger-ingredient__image-wrapper"],"pl-4 pr-4"),children:Object(k.jsx)("img",{alt:c,className:Ge.a["burger-ingredient__image"],src:a})}),Object(k.jsx)(T,{amount:s,className:p()(Ge.a["burger-ingredient__price-wrapper"],"pt-1 pb-1")}),Object(k.jsx)("div",{className:p()(Ge.a["burger-ingredient__title"]),children:c})]})]})},Qe=n(178),We=n.n(Qe),Ke=function(e){var t=e.className,n=e.ingredients,r=e.title,a=e.type,s=Object(j.h)(),i=Object(j.g)();return Object(k.jsxs)("li",{className:p()("pt-10",t),"data-type":a,children:[Object(k.jsx)("div",{className:"text text_type_main-medium",children:r}),Object(k.jsx)("ul",{className:p()(We.a["burger-ingredient-type__ingredient-list"],"pt-6 pr-4 pl-4"),children:n.map((function(e,t){return Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(ze,{ingredient:e,onClick:function(){i.push({pathname:"/ingredients/".concat(e._id),state:{backgroundPageLocation:s}})}}),Object(k.jsx)("li",{className:p()({"pl-6":t%2===0,"pt-8":t%2===1})})]},e._id)}))})]})},Xe=n(54),Ze=n.n(Xe),$e={bun:b.a.buns,sauce:b.a.sauces,main:b.a.burgerFillings},et=Object.keys($e),tt=[].concat(Object(f.a)(Array.from({length:49}).map((function(e,t){return t/49}))),[1]),nt=function(e){var t=e.className,n=Object(l.c)((function(e){return e.burger})).ingredients,r=Object(a.useState)(et[0]),c=Object(m.a)(r,2),s=c[0],i=c[1],o=Object(a.useMemo)((function(){var e=new Map;n.forEach((function(t){var n=t.type;e.has(n)||e.set(n,[]),e.get(n).push(t)}));var t=et.reduce((function(t,n){return e.has(n)?t.set(n,e.get(n)):t.set(n,[]),t}),new Map);return e.clear(),t}),[n]),d=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=d.current,t=e.querySelectorAll(".".concat(Ze.a["burger-ingredients__type-item"]));if(t.length>0){var n=new Map,r=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.target,r=e.intersectionRatio,a=t.dataset.type;a&&n.set(a,r)}));var t=Object(f.a)(n.entries()).sort((function(e,t){var n=Object(m.a)(e,2)[1];return Object(m.a)(t,2)[1]-n}))[0][0];i(t)}),{root:e,threshold:tt});return t.forEach((function(e){n.set(e.dataset.type,0),r.observe(e)})),function(){r.disconnect(),n.clear()}}}),[]),Object(k.jsxs)("div",{className:p()(Ze.a["burger-ingredients"],"pb-5",t),children:[Object(k.jsx)("div",{className:p()(Ze.a["burger-ingredients__title"],"pt-10 pb-5 text text_type_main-large"),children:b.a.assembleABurger}),Object(k.jsx)("div",{className:p()(Ze.a["burger-ingredients__filter"]),children:et.map((function(e){return Object(k.jsx)(w.Tab,{active:s===e,value:e,onClick:function(e){var t=d.current;if(t){var n=t.querySelector(".".concat(Ze.a["burger-ingredients__type-item"],'[data-type="').concat(e,'"]'));n&&n.scrollIntoView({behavior:"smooth"})}},children:$e[e]},e)}))}),Object(k.jsx)("ul",{ref:d,className:p()(Ze.a["burger-ingredients__type-list"],"custom-scroll"),children:Array.from(o.entries()).map((function(e){var t=Object(m.a)(e,2),n=t[0],r=t[1];return Object(k.jsx)(Ke,{className:Ze.a["burger-ingredients__type-item"],ingredients:r,title:$e[n],type:n},n)}))})]})},rt=n(130),at=n.n(rt),ct=function(e){var t=e.className,n=e.onClick;return Object(k.jsx)("div",{className:p()(at.a["modal-overlay"],Object(y.a)({},"".concat(at.a["modal-overlay_interactive"]),n),t),onClick:n})},st=n(61),it=n.n(st),ot=function(e){var t=e.children,n=e.className,r=e.onClose,c=e.title,s=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=s.current;e&&e.focus()}),[]);var i=Object(a.useCallback)((function(e){"Escape"===e.key&&r&&r()}),[r]);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ct,{className:it.a.modal__overlay,onClick:r}),Object(k.jsxs)("div",{ref:s,className:p()(it.a.modal,"p-10",n),onKeyDown:i,tabIndex:0,children:[Object(k.jsxs)("div",{className:it.a.modal__header,children:[Object(k.jsx)("div",{className:p()(it.a.modal__title," text text_type_main-large"),children:c}),Object(k.jsx)("button",{className:it.a["modal__close-button"],onClick:r,children:Object(k.jsx)(w.CloseIcon,{type:"primary"})})]}),Object(k.jsx)("div",{className:p()(it.a.modal__content,"custom-scroll"),children:t})]})]})},dt=n(62),ut=n.n(dt),lt="placed-order-details",_t=function(e){var t=e.className,n=e.orderDetails,r=n.id,a=n.status,c=n.message;return Object(k.jsxs)("div",{className:p()(ut.a[lt],t),children:[Object(k.jsx)("div",{className:p()(ut.a["".concat(lt,"__id")],"text text_type_digits-large"),children:String(r).padStart(6,"0")}),Object(k.jsx)("div",{className:"pt-8"}),Object(k.jsx)("div",{className:p()(ut.a["".concat(lt,"__id-title")],"text text_type_main-medium"),children:b.a.orderId}),Object(k.jsx)("div",{className:"pt-15"}),Object(k.jsx)("div",{className:ut.a["".concat(lt,"__status-icon-wrapper")],children:Object(k.jsx)(w.CheckMarkIcon,{type:"primary"})}),Object(k.jsx)("div",{className:"pt-15"}),Object(k.jsx)("div",{className:ut.a["".concat(lt,"__status-title")],children:b.b[a]}),Object(k.jsx)("div",{className:"pt-2"}),Object(k.jsx)("div",{className:p()(ut.a["".concat(lt,"__message")],"text_color_inactive"),children:c})]})},pt=n(82),jt=n.n(pt),bt="main-page",mt=function(){var e=Object(l.c)((function(e){return e.burger})).orderDetails,t=Object(l.b)();return Object(k.jsxs)("div",{className:p()(xe.a.page,xe.a["page_".concat(bt)],jt.a["main-page"]),children:[Object(k.jsxs)(Le.a,{backend:Fe.a,children:[Object(k.jsx)(nt,{className:jt.a["".concat(bt,"__ingredients")]}),Object(k.jsx)("div",{className:p()(jt.a["".concat(bt,"__space")],"pl-10")}),Object(k.jsx)(Be,{className:jt.a["".concat(bt,"__constructor")]})]}),e&&Object(k.jsx)(ot,{onClose:function(){return t(Object(u.w)())},children:Object(k.jsx)(_t,{className:p()(Ye.a["burger-constructor__order-details"],"mt-4 mb-20"),orderDetails:e})})]})},ft="not-found-page",gt=function(){return Object(k.jsx)("div",{className:p()(xe.a.page,xe.a["page_".concat(ft)],ft),children:"Not Found Page"})},Ot=function(){var e=Object(l.c)((function(e){return e.orders.userOrders})),t=Object(l.b)();return Object(a.useEffect)((function(){return t(Object(u.y)()),function(){t(Object(u.z)())}}),[t]),Object(k.jsx)(ce,{orders:e,renderStatus:!0})},ht=n(29),xt=[{componentType:se.input,icon:"EditIcon",name:"name",placeholder:b.a.forms.__common__.name,type:"text"},{componentType:se.input,icon:"EditIcon",name:"email",placeholder:b.a.forms.profile.email,type:"email"},{componentType:se.input,icon:"EditIcon",name:"password",placeholder:b.a.forms.__common__.password,type:"password"}],vt=function(){var e=Object(l.c)((function(e){return e.user})),t=e.user,n=e.updateUserDataPhase,r=Object(l.b)();Object(a.useEffect)((function(){return function(){r(Object(u.k)())}}),[r]);var c=Object(a.useMemo)((function(){return t?xt.map((function(e){var n=Object(ht.a)({},e);return Object.prototype.hasOwnProperty.call(t,e.name)&&(n.initialValue=t[e.name]),n})):xt}),[t]);return Object(k.jsx)("div",{children:Object(k.jsx)(Oe,{inputDeclarations:c,isButtonHiddenOnNotModifiedForm:!0,buttonTitle:b.a.forms.profile.doEdit,onSubmit:function(e){var t=e.email,a=e.name,c=e.password;n===u.c.initial&&r(Object(u.A)({email:t,name:a,password:c}))},resetButtonTitle:b.a.forms.__common__.resetForm,showErrors:!0})})},yt=n(40),wt=n.n(yt),Nt="profile-page",Ct=function(){var e=Object(l.c)((function(e){return e.user})).userTimeStamp,t=Object(j.j)().path,n=Object(j.j)({path:t,exact:!0}),r=Object(j.j)({path:"".concat(t,"/orders")});return Object(k.jsxs)("div",{className:p()(xe.a.page,xe.a["page_".concat(Nt)],wt.a["profile-page"],"pt-25"),children:[Object(k.jsxs)("ul",{className:p()(wt.a["".concat(Nt,"__menu")],"text_color_inactive"),children:[Object(k.jsx)("li",{className:p()(wt.a["".concat(Nt,"__menu-item")],Object(y.a)({},wt.a["".concat(Nt,"__menu-item-active")],n)),children:Object(k.jsx)(d.b,{className:wt.a["".concat(Nt,"__link")],to:"".concat(t),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(k.jsx)("li",{className:p()(wt.a["".concat(Nt,"__menu-item")],Object(y.a)({},wt.a["".concat(Nt,"__menu-item-active")],r)),children:Object(k.jsx)(d.b,{className:wt.a["".concat(Nt,"__link")],to:"".concat(t,"/orders"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(k.jsx)("li",{className:wt.a["".concat(Nt,"__menu-item")],children:Object(k.jsx)(d.b,{className:wt.a["".concat(Nt,"__link")],to:"/logout",children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(k.jsx)("div",{className:"pl-15"}),Object(k.jsx)("div",{className:wt.a["".concat(Nt,"__content")],children:Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{exact:!0,path:"".concat(t),children:Object(k.jsx)(vt,{},e)}),Object(k.jsx)(j.b,{path:"".concat(t,"/orders"),children:Object(k.jsx)(Ot,{})}),Object(k.jsx)(j.b,{children:Object(k.jsx)(j.a,{to:t})})]})})]})},kt="register-page",Tt=[{title:b.a.forms.register.areYouRegisteredAlready,url:"/login",urlTitle:b.a.forms.__common__.doLogin}],It=[{componentType:se.input,name:"name",placeholder:b.a.forms.__common__.name},{componentType:se.input,name:"email",placeholder:b.a.forms.__common__.email,type:"email"},{componentType:se.passwordInput,name:"password"}],Pt=function(){var e=Object(l.c)((function(e){return e.user})),t=e.userLoginPhase,n=e.userRegistrationPhase,r=Object(l.b)();return Object(a.useEffect)((function(){return function(){r(Object(u.m)())}}),[r]),[u.d.fulfilled].includes(t)||[u.e.fulfilled,u.e.rejected].includes(n)?Object(k.jsx)(j.a,{to:"/login"}):Object(k.jsx)("div",{className:p()(xe.a.page,xe.a["page_".concat(kt)],kt),children:Object(k.jsx)(Oe,{additionalActions:Tt,inputDeclarations:It,buttonTitle:b.a.forms.__common__.doRegister,onSubmit:function(e){var t=e.email,a=e.name,c=e.password;n===u.e.initial&&r(Object(u.s)({email:t,name:a,password:c}))},showErrors:!0,title:b.a.forms.register.title})})},St="reset-password-page",Et=[{title:b.a.forms.__common__.haveYouRememberedYourPassword,url:"/login",urlTitle:b.a.forms.__common__.doLogin}],Dt=[{componentType:se.passwordInput,name:"newPassword"},{componentType:se.input,name:"approvalCode",type:"text",placeholder:b.a.forms.resetPassword.provideApprovalCode}],Rt=function(){var e=Object(l.c)((function(e){return e.user})),t=e.userLoginPhase,n=e.passwordResettingPhase,r=Object(l.b)();return Object(a.useEffect)((function(){return function(){r(Object(u.j)())}}),[r]),[u.d.fulfilled].includes(t)?Object(k.jsx)(j.a,{to:"/"}):[u.b.fulfilled,u.b.initial,u.b.rejected].includes(n)?Object(k.jsx)(j.a,{to:"/login"}):Object(k.jsx)("div",{className:p()(xe.a.page,xe.a["page_".concat(St)],St),children:Object(k.jsx)(Oe,{additionalActions:Et,inputDeclarations:Dt,buttonTitle:b.a.forms.resetPassword.doReset,onSubmit:function(e){var t=e.newPassword,a=e.approvalCode;n===u.b.requestingCredentialsFromUser&&r(Object(u.u)({password:t,token:a}))},showErrors:!0,title:b.a.forms.resetPassword.title})})},At=n(183),Lt=["children"],Ft=function(e){var t=e.children,n=Object(At.a)(e,Lt),r=Object(l.c)((function(e){return e.user})).userLoginPhase,a=Object(j.h)().pathname;return Object(k.jsx)(j.b,Object(ht.a)(Object(ht.a)({},n),{},{render:function(){return r===u.d.fulfilled?t:Object(k.jsx)(j.a,{to:{pathname:"/login",state:{redirectedFrom:a}}})}}))},Mt=n(179),qt=n.n(Mt),Ut=function(){var e=Object(j.h)(),t=Object(j.h)().state,n=(null!==t&&void 0!==t?t:{}).backgroundPageLocation,r=Object(j.g)(),a="POP"===r.action;return n&&!a&&(e=n),Object(k.jsxs)("main",{className:p()(qt.a["app-body"],"pl-5 pr-5 text text_type_main-default"),children:[Object(k.jsxs)(j.d,{location:e,children:[Object(k.jsx)(j.b,{exact:!0,path:"/",children:Object(k.jsx)(mt,{})}),Object(k.jsx)(j.b,{exact:!0,path:"/login",children:Object(k.jsx)(Re,{})}),Object(k.jsx)(j.b,{exact:!0,path:"/register",children:Object(k.jsx)(Pt,{})}),Object(k.jsx)(j.b,{exact:!0,path:"/forgot-password",children:Object(k.jsx)(Ne,{})}),Object(k.jsx)(j.b,{exact:!0,path:"/reset-password",children:Object(k.jsx)(Rt,{})}),Object(k.jsx)(j.b,{path:"/feed",children:Object(k.jsx)(le,{})}),Object(k.jsx)(Ft,{path:"/profile",children:Object(k.jsx)(Ct,{})}),Object(k.jsx)(j.b,{path:"/ingredients/:id",children:Object(k.jsx)(Pe,{})}),Object(k.jsx)(j.b,{path:"/logout",children:Object(k.jsx)(Ae,{})}),Object(k.jsx)(j.b,{children:Object(k.jsx)(gt,{})})]}),n&&!a?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(j.b,{path:"/ingredients/:id",children:Object(k.jsx)(ot,{onClose:function(){return r.goBack()},title:b.a.ingredientDetails,children:Object(k.jsx)(Te,{className:p()(Ye.a["burger-constructor__ingredient-details"])})})}),Object(k.jsx)(j.b,{path:"/feed/:id",children:Object(k.jsx)(ot,{className:p()(),onClose:function(){return r.goBack()},title:b.a.orderDetails,children:Object(k.jsx)(V,{})})})]}):null]})},Yt=n(132),Bt=n.n(Yt),Ht=function(e){var t=e.className,n=e.Icon,r=e.isActive,a=e.onClick,c=e.text;return Object(k.jsxs)("li",{className:p()(Bt.a["menu-item"],Object(y.a)({},Bt.a["menu-item_active"],r),t,"p-5 text",{text_color_inactive:!r}),onClick:a,role:"button",children:[Object(k.jsx)(n,{type:r?"primary":"secondary"}),Object(k.jsx)("span",{className:"ml-2",children:c})]})};Ht.defaultProps={isActive:!0};var Vt=n(63),Jt=n.n(Vt),Gt=function(){var e,t=Object(j.g)(),n=Object(j.j)("/"),r=Object(j.j)("/feed"),a=Object(j.j)("/profile");return Object(k.jsx)("header",{className:p()(Jt.a["app-header"],"text text_type_main-default pt-3 pb-3"),children:Object(k.jsx)("nav",{children:Object(k.jsxs)("ul",{className:p()(Jt.a["app-header__menu-list"],"pt-4 pb-4"),children:[Object(k.jsx)(Ht,{className:Jt.a["app-header__menu-item"],Icon:w.BurgerIcon,isActive:null!==(e=n&&n.isExact)&&void 0!==e&&e,onClick:function(){t.push({pathname:"/"})},text:b.a.constructor}),Object(k.jsx)(Ht,{className:Jt.a["app-header__menu-item"],Icon:w.ListIcon,isActive:Boolean(r),onClick:function(){t.push({pathname:"/feed"})},text:b.a.orderList}),Object(k.jsx)("li",{className:Jt.a["app-header__logo-wrapper"],children:Object(k.jsx)(d.b,{to:"/",children:Object(k.jsx)(w.Logo,{})})}),Object(k.jsx)(Ht,{className:Jt.a["app-header__menu-item"],Icon:w.ProfileIcon,isActive:Boolean(a),onClick:function(){t.push({pathname:"/profile"})},text:b.a.profile})]})})})},zt=n(180),Qt=n.n(zt),Wt=function(){var e=Object(l.c)((function(e){return e.burger})),t=e.ingredientsError,n=e.ingredientsRequest,r=Object(l.c)((function(e){return e.user})).autoLoginPhase,c=Object(l.b)();return Object(a.useEffect)((function(){c(Object(u.i)())}),[c]),Object(a.useEffect)((function(){c(Object(u.h)())}),[c]),Object(a.useEffect)((function(){c(Object(u.x)())}),[c]),[u.a.fulfilled,u.a.rejected].includes(r)?Object(k.jsx)("div",{className:Qt.a.app,children:Object(k.jsxs)(d.a,{basename:"/react-burger",children:[Object(k.jsx)(Gt,{}),!n&&!t&&Object(k.jsx)(Ut,{})]})}):null},Kt=(n(372),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,387)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))});i.a.render(Object(k.jsxs)(c.a.StrictMode,{children:[Object(k.jsx)(o.a,{store:l.a,children:Object(k.jsx)(Wt,{})}),Object(k.jsx)("div",{id:"modal-container"})]}),document.getElementById("root")),Kt()},4:function(e,t,n){"use strict";n.d(t,"i",(function(){return E})),n.d(t,"r",(function(){return D})),n.d(t,"g",(function(){return A})),n.d(t,"f",(function(){return F})),n.d(t,"p",(function(){return M})),n.d(t,"t",(function(){return q})),n.d(t,"w",(function(){return U})),n.d(t,"B",(function(){return V})),n.d(t,"q",(function(){return H})),n.d(t,"x",(function(){return J})),n.d(t,"y",(function(){return G})),n.d(t,"z",(function(){return z})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"h",(function(){return W})),n.d(t,"n",(function(){return K})),n.d(t,"o",(function(){return X})),n.d(t,"s",(function(){return Z})),n.d(t,"u",(function(){return $})),n.d(t,"v",(function(){return ee})),n.d(t,"A",(function(){return te})),n.d(t,"C",(function(){return re})),n.d(t,"j",(function(){return ce})),n.d(t,"k",(function(){return se})),n.d(t,"l",(function(){return ie})),n.d(t,"m",(function(){return oe}));var r,a,c,s,i,o,d=n(29),u=n(10),l=n(8),_=n(5),p=n.n(_),j=n(13),b=n(23),m=n(386),f=n(12),g=n(27),O=n(9),h=n(182),x=n(43),v="authRefreshToken",y=new h.a,w=function(e){var t=e.accessSchema,n=e.accessToken,r=e.refreshToken,a={accessSchema:t,accessToken:n};Object.entries(a).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return y.set(n,r,{path:"/"})})),localStorage.setItem(v,r)},N=function(){return["accessSchema","accessToken"].reduce((function(e,t){return Object.assign(e,Object(O.a)({},t,y.get(t)))}),{})},C=function(){return localStorage.authRefreshToken},k=function(e,t){e.user=t,e.userTimeStamp=(new Date).getTime()},T=function(){return Object(m.a)()},I={actualIngredients:[],idToActualIngredientsCountMap:{},idToIngredientMap:{},ingredients:[],ingredientsError:null,ingredientsRequest:!0,orderDetails:null,orderDetailsError:null,orderDetailsRequest:!1,totalAmount:0},P=function(e){var t=e.actualIngredients,n=e.idToIngredientMap;return t.map((function(e){return e.refId})).reduce((function(e,t){return e+n[t].price}),0)},S=function(e){return e.actualIngredients.reduce((function(e,t){return Object.prototype.hasOwnProperty.call(e,t.refId)?e[t.refId]+=1:e[t.refId]=1,e}),{})},E=Object(b.b)("burger/fetchIngredients",g.b),D=Object(b.b)("burger/placeAnOrder",function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N(),r=n.accessSchema,a=n.accessToken,0!==t.length){e.next=3;break}throw new Error("Unable to place an order for the empty ingredients list");case 3:if(r&&a){e.next=5;break}throw new Error("Action cannot be handled");case 5:return e.abrupt("return",Object(g.f)({ingredients:t,auth:{accessSchema:r,accessToken:a}}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(b.c)({name:"burger",initialState:I,reducers:{addIngredient:function(e,t){var n=t.payload,r=e.actualIngredients,a=n._id;if(n.type===f.c.bun){var c=[f.a.top,f.a.bottom].map((function(e){return{id:T(),type:e,isLocked:!0,refId:a}})),s=Object(l.a)(c,2),i=s[0],o=s[1];e.actualIngredients=[i].concat(Object(u.a)(r.slice(1,-1)),[o])}else{var d=Object(u.a)(r);d.splice(-1,0,{id:T(),refId:a}),e.actualIngredients=d}e.totalAmount=P(e),e.idToActualIngredientsCountMap=S(e)},moveIngredient:function(e,t){var n=Object(l.a)(t.payload,2),r=n[0],a=n[1],c=e.actualIngredients,s=Object(u.a)(c);s.splice(a,0,s.splice(r,1)[0]),e.actualIngredients=s},removeIngredient:function(e,t){var n=t.payload,r=e.actualIngredients,a=e.actualIngredients.slice(1,-1);a.map((function(e){return e.id})).includes(n)&&(e.actualIngredients=[r[0]].concat(Object(u.a)(a.filter((function(e){return e.id!==n}))),[r[r.length-1]]),e.totalAmount=P(e),e.idToActualIngredientsCountMap=S(e))},resetOrderDetails:function(e){e.orderDetailsRequest||Object.assign(e,{orderDetails:null,orderDetailsError:null,orderDetailsRequest:!1})}},extraReducers:function(e){e.addCase(E.pending,(function(e){Object.assign(e,Object(d.a)(Object(d.a)({},I),{},{ingredientsRequest:!0}))})).addCase(E.fulfilled,(function(e,t){var n=t.payload,r={};n.forEach((function(e){r[e._id]=e})),Object.assign(e,{idToIngredientMap:r,ingredients:n,ingredientsRequest:!1})})).addCase(E.rejected,(function(e,t){var n=t.error;Object.assign(e,{ingredientsError:n,ingredientsRequest:!1})})),e.addCase(D.pending,(function(e){Object.assign(e,{orderDetails:null,orderDetailsError:null,orderDetailsRequest:!0})})).addCase(D.fulfilled,(function(e,t){var n=t.payload;e.orderDetailsRequest=!1,e.orderDetails=n,e.actualIngredients=[],e.totalAmount=P(e),e.idToActualIngredientsCountMap=S(e)})).addCase(D.rejected,(function(e,t){var n=t.error;Object.assign(e,{orderDetailsError:n,orderDetailsRequest:!1})}))}}),A=R.reducer,L=R.actions,F=L.addIngredient,M=L.moveIngredient,q=L.removeIngredient,U=L.resetOrderDetails,Y=Object.entries({orders:"/orders/all",userOrders:"/orders"}).reduce((function(e,t){var n=Object(l.a)(t,2),r=n[0],a=n[1],c=function(){var e=Object(m.a)();return{wsCloseConnection:"".concat(x.a.wsCloseConnection,"_").concat(e),wsConnectionSuccess:"".concat(x.a.wsConnectionSuccess,"_").concat(e),wsConnectionError:"".concat(x.a.wsConnectionError,"_").concat(e),wsConnectionClose:"".concat(x.a.wsConnectionClose,"_").concat(e),wsGetMessage:"".concat(x.a.wsGetMessage,"_").concat(e),wsOpenConnection:"".concat(x.a.wsOpenConnection,"_").concat(e),wsSendMessage:"".concat(x.a.wsSendMessage,"_").concat(e)}}();return e[r]={subscribe:Object(b.b)("orders/".concat(r,"/subscribe"),(function(e,t){var n=t.dispatch;if("orders"===r&&n({type:c.wsOpenConnection}),"userOrders"===r){var a=N(),s=a.accessSchema,i=a.accessToken;if(!s||!i)throw new Error("Action cannot be handled");n({type:c.wsOpenConnection,payload:{auth:{accessSchema:s,accessToken:i}}})}})),unsubscribe:Object(b.b)("orders/".concat(r,"/unsubscribe"),(function(e,t){(0,t.dispatch)({type:c.wsCloseConnection})})),url:a,wsActionTypes:c},e}),{}),B=Object(b.c)({name:"orders",initialState:{orders:[],userOrders:[]},reducers:(r={},Object(O.a)(r,Y.orders.wsActionTypes.wsGetMessage,(function(e,t){var n=t.payload,r=n.success,a=n.orders,c=n.total,s=n.totalToday;r&&(e.orders=a,e.total=c,e.totalToday=s)})),Object(O.a)(r,Y.userOrders.wsActionTypes.wsGetMessage,(function(e,t){var n=t.payload,r=n.success,a=n.orders;r&&(e.userOrders=a)})),r),extraReducers:function(e){e.addCase(Y.orders.subscribe.pending,(function(){})),e.addCase(Y.userOrders.subscribe.pending,(function(){}))}}),H=B.reducer,V=Object.values(Y).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{wsActionTypes:Object.fromEntries(Object.entries(e.wsActionTypes).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return[n,B.actions[r]?B.actions[r].type:r]})))})})).map((function(e){return[e.url,e.wsActionTypes]})),J=Y.orders.subscribe,G=Y.userOrders.subscribe,z=Y.userOrders.unsubscribe;!function(e){e.initial="initial",e.requestingApprovalCode="requesting-approval-code",e.requestingCredentialsFromUser="requesting-credentials-from-user",e.pendingResetting="pending-resetting",e.fulfilled="fulfilled",e.rejected="rejected"}(a||(a={})),function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(c||(c={})),function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(s||(s={})),function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(i||(i={})),function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(o||(o={}));var Q={autoLoginPhase:o.initial,passwordResettingPhase:a.initial,userLoginPhase:s.initial,userRegistrationPhase:c.initial,updateUserDataPhase:i.initial},W=Object(b.b)("user/doAutoLogin",Object(j.a)(p.a.mark((function e(){var t,n,r,a,c,s,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=N(),n=t.accessSchema,r=t.accessToken,n&&r){e.next=3;break}throw new Error("Action cannot be handled");case 3:return e.prev=3,e.next=6,Object(g.c)({auth:{accessSchema:n,accessToken:r}});case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),"jwt expired"===e.t0.message){e.next=13;break}throw e.t0;case 13:if(a=C()){e.next=16;break}throw e.t0;case 16:return e.next=18,Object(g.g)({refreshToken:a});case 18:return c=e.sent,w(c),s=N(),i=s.accessSchema,o=s.accessToken,e.abrupt("return",Object(g.c)({auth:{accessSchema:i,accessToken:o}}));case 22:case"end":return e.stop()}}),e,null,[[3,9]])})))),K=Object(b.b)("user/login",g.d),X=Object(b.b)("user/logout",Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=C())){e.next=3;break}return e.abrupt("return",Object(g.e)({refreshToken:t}));case 3:case"end":return e.stop()}}),e)})))),Z=Object(b.b)("user/registerUser",g.h),$=Object(b.b)("user/requestNewPasswordSetting",g.i),ee=Object(b.b)("user/requestPasswordResettingForEmail",g.j),te=Object(b.b)("user/updateUserData",function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r,a,c,s,i,o,d,u,l,_;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,r=t.name,a=t.password,c=N(),s=c.accessSchema,i=c.accessToken,s&&i){e.next=4;break}throw new Error("Action cannot be handled");case 4:return e.prev=4,e.next=7,Object(g.k)({auth:{accessSchema:s,accessToken:i},data:{email:n,name:r,password:a}});case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),"jwt expired"===e.t0.message){e.next=14;break}throw e.t0;case 14:if(o=C()){e.next=17;break}throw e.t0;case 17:return e.next=19,Object(g.g)({refreshToken:o});case 19:return d=e.sent,w(d),u=N(),l=u.accessSchema,_=u.accessToken,e.abrupt("return",Object(g.k)({auth:{accessSchema:l,accessToken:_},data:{email:n,name:r,password:a}}));case 23:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()),ne=Object(b.c)({name:"user",initialState:Q,reducers:{interruptPasswordResettingWorkflow:function(e){e.passwordResettingPhase=a.initial},interruptUpdateUserData:function(e){e.updateUserDataPhase=i.initial},interruptUserLogin:function(e){e.userLoginPhase=s.initial},interruptUserRegistration:function(e){e.userRegistrationPhase=c.initial}},extraReducers:function(e){e.addCase(ee.pending,(function(e){e.passwordResettingPhase=a.requestingApprovalCode})).addCase(ee.fulfilled,(function(e){e.passwordResettingPhase=a.requestingCredentialsFromUser})).addCase(ee.rejected,(function(e){e.passwordResettingPhase=a.initial})),e.addCase($.pending,(function(e){e.passwordResettingPhase=a.pendingResetting})).addCase($.fulfilled,(function(e){e.passwordResettingPhase=a.fulfilled})).addCase($.rejected,(function(e){e.passwordResettingPhase=a.rejected})),e.addCase(Z.pending,(function(e){e.userRegistrationPhase=c.pending})).addCase(Z.fulfilled,(function(e,t){var n=t.payload;w(n),e.userRegistrationPhase=c.fulfilled,k(e,n.user)})).addCase(Z.rejected,(function(e){e.userRegistrationPhase=c.rejected})),e.addCase(K.pending,(function(e){e.userLoginPhase=s.pending})).addCase(K.fulfilled,(function(e,t){var n=t.payload;w(n),e.userLoginPhase=s.fulfilled,k(e,n.user)})).addCase(K.rejected,(function(e){e.userLoginPhase=s.rejected})),e.addCase(X.pending,(function(){})).addCase(X.fulfilled,(function(e){localStorage.removeItem(v),["accessSchema","accessToken"].forEach((function(e){return y.remove(e,{path:"/"})})),function(e){delete e.user,delete e.userTimeStamp}(e),e.userLoginPhase=s.initial})).addCase(X.rejected,(function(){})),e.addCase(te.pending,(function(e){e.updateUserDataPhase=i.pending})).addCase(te.fulfilled,(function(e,t){var n=t.payload;k(e,n.user),e.updateUserDataPhase=i.fulfilled})).addCase(te.rejected,(function(e){e.updateUserDataPhase=i.rejected})),e.addCase(W.pending,(function(e){e.autoLoginPhase=o.pending})).addCase(W.fulfilled,(function(e,t){var n=t.payload;e.autoLoginPhase=o.fulfilled,e.userLoginPhase=s.fulfilled,k(e,n)})).addCase(W.rejected,(function(e){e.autoLoginPhase=o.rejected}))}}),re=ne.reducer,ae=ne.actions,ce=ae.interruptPasswordResettingWorkflow,se=ae.interruptUpdateUserData,ie=ae.interruptUserLogin,oe=ae.interruptUserRegistration},40:function(e,t,n){e.exports={"profile-page":"style_profile-page__12ojB","profile-page__menu":"style_profile-page__menu__2OSFh","profile-page__content":"style_profile-page__content__2Awb7","profile-page__menu-item":"style_profile-page__menu-item__2eOTc","profile-page__menu-item-active":"style_profile-page__menu-item-active__2p6ra","profile-page__link":"style_profile-page__link__9hpBo"}},43:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.wsCloseConnection="wsCloseConnection",e.wsConnectionSuccess="wsConnectionSuccess",e.wsConnectionError="wsConnectionError",e.wsConnectionClose="wsConnectionClose",e.wsGetMessage="wsGetMessage",e.wsOpenConnection="wsOpenConnection",e.wsSendMessage="wsSendMessage"}(r||(r={}));var a=function(e,t){return function(n){var r;return function(a){return function(c){var s,i=n.dispatch,o=c.type,d=c.payload;switch(o){case t.wsOpenConnection:var u=(null!==d&&void 0!==d?d:{}).auth,l=(null!==u&&void 0!==u?u:{}).accessToken;(r=new WebSocket("".concat(e).concat(l?"?token=".concat(l):""))).onopen=function(){i({type:t.wsConnectionSuccess})},r.onmessage=function(e){var n=e.data,r=JSON.parse(n);i({type:t.wsGetMessage,payload:r})},r.onerror=function(){i({type:t.wsConnectionError})},r.onclose=function(){i({type:t.wsConnectionClose})};break;case t.wsCloseConnection:null===(s=r)||void 0===s||s.close(),r=void 0;break;case t.wsSendMessage:var _,p=d.message;null===(_=r)||void 0===_||_.send(JSON.stringify(p))}a(c)}}}}},44:function(e,t,n){e.exports={"feed-activity":"style_feed-activity__2zM2N","feed-activity__orders-by-status":"style_feed-activity__orders-by-status__1Kga_","feed-activity__orders-list":"style_feed-activity__orders-list__2-LdL","feed-activity__orders-list_done":"style_feed-activity__orders-list_done__Db1G3","feed-activity__order":"style_feed-activity__order__3DQ7U","feed-activity__orders-wrapper":"style_feed-activity__orders-wrapper__1YlLl","feed-activity__orders":"style_feed-activity__orders__1sK3E","feed-activity__orders-total-count":"style_feed-activity__orders-total-count__NlUFF"}},45:function(e,t,n){e.exports={form:"style_form__3d8HQ",form__header:"style_form__header__3sDZb",form__body:"style_form__body__2i5xi",form__errors:"style_form__errors__29KrO","form__buttons-container":"style_form__buttons-container__3hu67","form__button-wrapper":"style_form__button-wrapper__I3YEI","form__additional-actions":"style_form__additional-actions__3Z0Nm"}},47:function(e,t,n){e.exports={"ingredient-details":"style_ingredient-details__13xEY","ingredient-details__picture-wrapper":"style_ingredient-details__picture-wrapper__2n82A","ingredient-details__picture":"style_ingredient-details__picture__11V57","ingredient-details__title":"style_ingredient-details__title__WZMcA","ingredient-details__nutritional-values":"style_ingredient-details__nutritional-values__XSWu_","ingredient-details__nutritional-value":"style_ingredient-details__nutritional-value__1P1f6","ingredient-details__nutritional-value-title":"style_ingredient-details__nutritional-value-title__3110a","ingredient-details__nutritional-value-value":"style_ingredient-details__nutritional-value-value__2HErT"}},52:function(e,t,n){e.exports={"burger-constructor-item":"style_burger-constructor-item__6ndAy","burger-constructor-item_is-drag-over":"style_burger-constructor-item_is-drag-over__8rJ5N","burger-constructor-item_is-can-drop":"style_burger-constructor-item_is-can-drop__1ROm7","burger-constructor-item_is-picked":"style_burger-constructor-item_is-picked__bR2iz","burger-constructor-item__constructor-element-wrapper":"style_burger-constructor-item__constructor-element-wrapper__2ki39","burger-constructor-item_interactive":"style_burger-constructor-item_interactive__3QnkX"}},53:function(e,t,n){e.exports={"burger-ingredient":"style_burger-ingredient__It1Se","burger-ingredient_interactive":"style_burger-ingredient_interactive__3zkQq","burger-ingredient_is-picked":"style_burger-ingredient_is-picked__3Qo2E","burger-ingredient__image-wrapper":"style_burger-ingredient__image-wrapper__2P4Vw","burger-ingredient__price-wrapper":"style_burger-ingredient__price-wrapper__2td-g","burger-ingredient__title":"style_burger-ingredient__title__26qp_"}},54:function(e,t,n){e.exports={"burger-ingredients":"style_burger-ingredients__2mHyl","burger-ingredients__filter":"style_burger-ingredients__filter__1NLWy","burger-ingredients__type-list":"style_burger-ingredients__type-list__IM2C3","burger-ingredients__type-item":"style_burger-ingredients__type-item__1JXTu"}},59:function(e,t,n){e.exports={"order-details":"style_order-details__DhWNa","order-details__number":"style_order-details__number__V177Z","order-details__ingredients":"style_order-details__ingredients__3bnWR","order-details__date-and-price-wrapper":"style_order-details__date-and-price-wrapper__22VvY","order-details__date":"style_order-details__date__2fzRM","order-details__price":"style_order-details__price__3cT3V"}},60:function(e,t,n){e.exports={"feed-page":"style_feed-page__1EcWu","feed-page__feed-wrapper":"style_feed-page__feed-wrapper__a7rWx","feed-page__activity":"style_feed-page__activity__3VV0z","feed-page__space":"style_feed-page__space__2Tocc","feed-page__title":"style_feed-page__title__uWGJ2"}},61:function(e,t,n){e.exports={modal:"style_modal__vQxtL",modal__header:"style_modal__header__3dmqg",modal__title:"style_modal__title__14q9S","modal__close-button":"style_modal__close-button__3aKnX",modal__content:"style_modal__content__1zYdw"}},62:function(e,t,n){e.exports={"placed-order-details":"style_placed-order-details__3oQDj","placed-order-details__id":"style_placed-order-details__id__36QKe","placed-order-details__id-title":"style_placed-order-details__id-title__uZuw6","placed-order-details__status-icon-wrapper":"style_placed-order-details__status-icon-wrapper__3cFVu","placed-order-details__status-title":"style_placed-order-details__status-title__3epTR","placed-order-details__message":"style_placed-order-details__message__3FkGV"}},63:function(e,t,n){e.exports={"app-header":"style_app-header__C5Utm","app-header__menu-list":"style_app-header__menu-list__tOfh6","app-header__logo-wrapper":"style_app-header__logo-wrapper__2jy8W"}},68:function(e,t,n){e.exports={order:"style_order__zDJGQ","order__number-and-date-wrapper":"style_order__number-and-date-wrapper__1jBEz",order__number:"style_order__number__2M1gc",order__date:"style_order__date__3-Vi4",order__title:"style_order__title__1AHlE"}},7:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(8),a=n(23),c=n(79),s=n(27),i=n(43),o=n(4),d=Object(a.a)({devTools:!1,middleware:function(e){return e().concat(o.B.map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(i.b)("ws".concat("".concat(s.a.replace(/^http/,"")),n),a)})))},reducer:{burger:o.g,orders:o.q,user:o.C}}),u=function(){return Object(c.b)()},l=function(e,t){return Object(c.c)(e,t)}},80:function(e,t,n){e.exports={amount:"style_amount__2_jh4",amount_type_total:"style_amount_type_total__pvRzS",amount__amount:"style_amount__amount__315ja","amount__currency-wrapper":"style_amount__currency-wrapper__2m355"}},81:function(e,t,n){e.exports={"ingredients-and-price":"style_ingredients-and-price__3ETkO","ingredients-and-price__ingredients":"style_ingredients-and-price__ingredients__uOPK3","ingredients-and-price__ingredient":"style_ingredients-and-price__ingredient__1LWgi","ingredients-and-price__price":"style_ingredients-and-price__price__2jACN"}},82:function(e,t,n){e.exports={"main-page":"style_main-page__Jmc7f","main-page__ingredients":"style_main-page__ingredients__1V60h","main-page__constructor":"style_main-page__constructor__UVP6s","main-page__space":"style_main-page__space__3sPGu"}},96:function(e,t,n){e.exports={"ingredient-icon":"style_ingredient-icon__ocBI9","ingredient-icon__image":"style_ingredient-icon__image__3UlgI","ingredient-icon__more-ingredients-count":"style_ingredient-icon__more-ingredients-count__1Etp1"}},97:function(e,t,n){e.exports={"ingredient-and-price":"style_ingredient-and-price__2V9AG","ingredient-and-price__quantity-and-price-wrapper":"style_ingredient-and-price__quantity-and-price-wrapper__2OdnI","ingredient-and-price__quantity":"style_ingredient-and-price__quantity__2HYYA"}},98:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r=n(9),a=n(8),c=(n(1),n(2)),s=n.n(c),i=n(376),o=n(377),d=n(374),u=n(17),l=n(12),_=n(3),p=n(7),j=n(4),b=n(52),m=n.n(b),f=n(0),g=function(t){var n,c=t.className,b=t.index,g=t.ingredient,O=(g._id,g.image),h=g.name,x=g.price,v=t.isLocked,y=t.onShowIngredientInfo,w=t.onDelete,N=t.type,C=Object(p.c)((function(e){return e.burger.orderDetailsRequest})),k=Object(p.b)(),T=Object(i.a)({type:l.b.actualIngredient,canDrag:!v&&!C,item:{index:b},collect:function(e){return{isItPicked:e.isDragging()}}}),I=Object(a.a)(T,3),P=I[0].isItPicked,S=I[1],E=I[2],D=Object(o.a)({accept:l.b.actualIngredient,canDrop:function(){return!v&&!C},collect:function(e){return{isCanDrop:e.canDrop(),isDragOver:e.isOver()}},hover:function(t){var n=t.index;b!==n&&null!=b&&(t.index=b,e((function(){k(Object(j.p)([n,b]))})))}}),R=Object(a.a)(D,2),A=R[0],L=A.isCanDrop,F=A.isDragOver,M=R[1];return Object(f.jsxs)("div",{ref:M,className:s()(m.a["burger-constructor-item"],(n={},Object(r.a)(n,m.a["burger-constructor-item_interactive"],y),Object(r.a)(n,m.a["burger-constructor-item_is-picked"],P),Object(r.a)(n,m.a["burger-constructor-item_is-can-drop"],L),Object(r.a)(n,m.a["burger-constructor-item_is-drag-over"],F),Object(r.a)(n,"pt-4",!v),n),c),onClick:function(e){var t=e.target;y&&t.closest(".".concat(m.a["burger-constructor-item__constructor-element-wrapper"]))&&!t.closest(".constructor-element__action")&&y()},children:[v?Object(f.jsx)("div",{className:"pl-8"}):Object(f.jsx)("div",{ref:S,children:Object(f.jsx)(u.DragIcon,{type:"primary"})}),Object(f.jsx)(d.a,{connect:E,src:O}),Object(f.jsx)("div",{className:"pl-6"}),Object(f.jsx)("div",{className:m.a["burger-constructor-item__constructor-element-wrapper"],children:Object(f.jsx)(u.ConstructorElement,{handleClose:w,isLocked:v,price:x,text:"".concat(h).concat(N?" (".concat(N===l.a.top?_.a.top:_.a.bottom,")"):""),thumbnail:O,type:N})})]})}}).call(this,n(369).setImmediate)}},[[373,1,2]]]);
//# sourceMappingURL=main.9b1f2587.chunk.js.map