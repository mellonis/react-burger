(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{112:function(e,t,r){e.exports={"modal-overlay":"style_modal-overlay__v0yzo","modal-overlay_interactive":"style_modal-overlay_interactive__1pDN1"}},114:function(e,t,r){e.exports={"menu-item":"style_menu-item__3CXGR"}},15:function(e,t,r){e.exports={page:"page-style_page__3yGBB"}},159:function(e,t,r){e.exports={"burger-ingredient-type":"style_burger-ingredient-type__MQwyq","burger-ingredient-type__ingredient-list":"style_burger-ingredient-type__ingredient-list__lsh46","burger-ingredient-type__ingredient-details":"style_burger-ingredient-type__ingredient-details__3Z88b"}},160:function(e,t,r){e.exports={"app-body":"style_app-body__2ijFH"}},161:function(e,t,r){e.exports={app:"style_app__1uR4E"}},20:function(e,t,r){"use strict";var n,a,i,s;r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return s})),function(e){e.top="top",e.bottom="bottom"}(n||(n={})),function(e){e.ingredient="ingredient",e.actualIngredient="actualIngredient"}(a||(a={})),function(e){e.bun="bun",e.sauce="sauce",e.main="main"}(i||(i={})),function(e){e[e.BEING_COOKED=0]="BEING_COOKED",e[e.COOKED=1]="COOKED",e[e.BEING_DELIVERED=2]="BEING_DELIVERED",e[e.DELIVERED=3]="DELIVERED"}(s||(s={}))},27:function(e,t,r){e.exports={"burger-constructor":"style_burger-constructor__3a8p5","burger-constructor_is-empty":"style_burger-constructor_is-empty__1F7G8","burger-constructor__list":"style_burger-constructor__list__oWYKC","burger-constructor_is-can-drop":"style_burger-constructor_is-can-drop__QK3ua","burger-constructor_is-drag-over":"style_burger-constructor_is-drag-over__--itU","burger-constructor__filling":"style_burger-constructor__filling__2agyk","burger-constructor__total-wrapper":"style_burger-constructor__total-wrapper__21Smn","burger-constructor__order-details":"style_burger-constructor__order-details__12HWu"}},33:function(e,t,r){e.exports={"profile-page":"style_profile-page__12ojB","profile-page__menu":"style_profile-page__menu__2OSFh","profile-page__content":"style_profile-page__content__2Awb7","profile-page__menu-item":"style_profile-page__menu-item__2eOTc","profile-page__menu-item-active":"style_profile-page__menu-item-active__2p6ra","profile-page__link":"style_profile-page__link__9hpBo"}},352:function(e,t,r){},353:function(e,t,r){"use strict";r.r(t);var n,a=r(0),i=r.n(a),s=r(76),c=r.n(s),o=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,364)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),i(e),s(e)}))},u=r(66),l=r(7),d=r(19),p=r(6),_=r(2),b=r.n(_),j=r(18),m=r(5),f=r(15),g=r.n(f),O=r(1),h="feed-page",x=function(){return Object(O.jsx)("div",{className:b()(g.a.page,g.a["page_".concat(h)],h),children:"Feed Page"})},v=r(9),y=r(8),w=r(165),N=r(16),k=r(35),C=r(82),I=function(e,t){var r=e.title,n=e.url,a=e.urlTitle;return Object(O.jsxs)(i.a.Fragment,{children:[t>0?Object(O.jsx)("div",{className:"pt-4"}):null,Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{dangerouslySetInnerHTML:{__html:r}}),"\xa0",Object(O.jsx)(d.b,{to:n,dangerouslySetInnerHTML:{__html:a}})]})]},t)};!function(e){e.input="input",e.passwordInput="passwordInput"}(n||(n={}));var T=function(e,t){var r;switch(e.componentType){case n.input:var a=e.icon,s=e.name,c=e.placeholder,o=e.type,u=void 0===o?"text":o;r=Object(O.jsx)(k.a,{control:this,name:s,render:function(e){var t=e.field,r=t.onChange,n=t.value;return Object(O.jsx)(N.Input,{icon:a,onChange:r,placeholder:c,type:u,value:n})}});break;case n.passwordInput:var l=e.name;r=Object(O.jsx)(k.a,{control:this,name:l,render:function(e){var t=e.field,r=t.onChange,n=t.value;return Object(O.jsx)(N.PasswordInput,{name:l,onChange:r,value:n})}})}return Object(O.jsxs)(i.a.Fragment,{children:[t>0?Object(O.jsx)("div",{className:"pt-6"}):null,r]},t)},P=r(36),E=r.n(P),D=function(e){var t=e.additionalActions,r=e.buttonTitle,i=e.inputDeclarations,s=e.isButtonHiddenOnNotModifiedForm,c=e.onSubmit,o=e.resetButtonTitle,u=e.showErrors,l=e.title,d=Object(a.useRef)(null),p=Object(a.useMemo)((function(){return C.a().shape(i.reduce((function(e,t){return Object.assign(e,Object(y.a)({},t.name,function(){var e;return t.componentType===n.passwordInput||"password"===t.name?C.b().min(6,"".concat(m.a.forms.__common__.__errors__.passwordLength," (").concat(null!==(e=t.placeholder)&&void 0!==e?e:t.name,")")):C.b().required("".concat(m.a.forms.__common__.__errors__.required," (").concat(t.placeholder,")"))}()))}),{}))}),[i]),_=Object(k.e)({defaultValues:i.reduce((function(e,t){var r=t.name,n=t.initialValue;return Object.assign(e,Object(y.a)({},r,null!==n&&void 0!==n?n:""))}),{}),mode:"onSubmit",resolver:Object(w.a)(p)}),j=_.control,f=_.handleSubmit,g=_.formState,h=g.errors,x=g.isDirty,P=_.reset,D=Object(a.useCallback)((function(e){console.error(e)}),[]),S=Object(a.useCallback)((function(){var e=d.current;if(e){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];c.apply(null,r)}}),[c]),R=Object(a.useCallback)((function(){var e=d.current;e&&e.dispatchEvent(new Event("submit"))}),[]),L=r&&(!s||s&&x),A=o&&x;return Object(O.jsxs)("form",{ref:d,className:E.a.form,onSubmit:f(S,D),children:[l?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:E.a.form__header,dangerouslySetInnerHTML:{__html:l}}),Object(O.jsx)("div",{className:"pt-6"})]}):null,Object(O.jsx)("div",{className:E.a.form__body,children:i.map(T,j)}),x&&u&&Object.keys(h).length>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"pt-6"}),Object(O.jsx)("ul",{className:b()(E.a.form__errors,"text_color_error"),children:Object.entries(h).sort((function(e,t){var r=Object(v.a)(e,1)[0],n=Object(v.a)(t,1)[0];return r.localeCompare(n)})).map((function(e){var t,r=Object(v.a)(e,2),n=r[0],a=r[1];return Object(O.jsx)("li",{className:E.a.form__error,children:null!==(t=null===a||void 0===a?void 0:a.message)&&void 0!==t?t:"unknown"},n)}))})]}):null,L||A?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"pt-6"}),Object(O.jsxs)("div",{className:E.a["form__buttons-container"],children:[L?Object(O.jsx)("div",{className:E.a["form__button-wrapper"],children:Object(O.jsx)(N.Button,{type:"primary",onClick:R,children:r})}):null,L&&A?Object(O.jsx)("div",{className:"pl-6"}):null,A?Object(O.jsx)("div",{className:E.a["form__button-wrapper"],children:Object(O.jsx)(N.Button,{type:"primary",onClick:function(){return P()},children:o})}):null]})]}):null,t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"pt-20"}),Object(O.jsx)("div",{className:b()(E.a["form__additional-actions"],"text_color_inactive"),children:t.map(I)})]}):null]})};D.defaultProps={isButtonHiddenOnNotModifiedForm:!1,showErrors:!1};var S="forgot-password-page",R=[{title:m.a.forms.__common__.haveYouRememberedYourPassword,url:"/login",urlTitle:m.a.forms.__common__.doLogin}],L=[{componentType:n.input,name:"email",placeholder:m.a.forms.forgotPassword.provideYourEmail,type:"email"}],A=function(){var e=Object(l.c)((function(e){return e.user})),t=e.userLoginPhase,r=e.passwordResettingPhase,n=Object(l.b)();return[p.d.fulfilled].includes(t)?Object(O.jsx)(j.a,{to:"/"}):[p.b.requestingCredentialsFromUser,p.b.pendingResetting,p.b.fulfilled].includes(r)?Object(O.jsx)(j.a,{to:"/reset-password"}):Object(O.jsx)("div",{className:b()(g.a.page,g.a["page_".concat(S)],S),children:Object(O.jsx)(D,{additionalActions:R,buttonTitle:m.a.forms.forgotPassword.doResetPassword,inputDeclarations:L,onSubmit:function(e){var t=e.email;r===p.b.initial&&n(Object(p.u)({email:t}))},title:m.a.forms.forgotPassword.title})})},F=r(38),q=r.n(F),M=function(e){var t=e.className,r=Object(j.i)().id,n=Object(l.c)((function(e){return e.burger})).idToIngredientMap[r],s=n.calories,c=n.carbohydrates,o=n.fat,u=n.proteins,d=n.image,p=n.name,_=Object(a.useMemo)((function(){return{calories:s,carbohydrates:c,fat:o,proteins:u}}),[s,c,o,u]);return Object(O.jsxs)("div",{className:b()(q.a["ingredient-details"],"mb-5",t),children:[Object(O.jsx)("div",{className:b()(q.a["ingredient-details__picture-wrapper"],"pl-5 pr-5"),children:Object(O.jsx)("img",{alt:p,className:q.a["ingredient-details__picture"],src:d})}),Object(O.jsx)("div",{className:"pt-4"}),Object(O.jsx)("div",{className:b()(q.a["ingredient-details__title"],"text text_type_main-medium"),children:p}),Object(O.jsx)("div",{className:"pt-8"}),Object(O.jsx)("div",{className:b()(q.a["ingredient-details__nutritional-values"],"text_color_inactive"),children:Object.entries(_).map((function(e,t,r){var n=Object(v.a)(e,2),a=n[0],s=n[1];return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsxs)("div",{className:q.a["ingredient-details__nutritional-value"],children:[Object(O.jsx)("div",{className:q.a["ingredient-details__nutritional-value-title"],children:m.a[a]}),Object(O.jsx)("div",{className:b()(q.a["ingredient-details__nutritional-value-value"],"text text_type_digits-default pt-2"),children:s})]}),t+1<r.length?Object(O.jsx)("div",{className:"pl-5"}):null]},a)}))})]})},B="ingredients-page",U=function(){var e=Object(j.j)().params.id,t=Object(l.c)((function(e){return e.burger})),r=t.idToIngredientMap;return t.ingredientsRequest?null:r[e]?Object(O.jsx)("div",{className:b()(g.a.page,g.a["page_".concat(B)],B),children:Object(O.jsx)(M,{})}):Object(O.jsx)(j.a,{to:"/"})},Y="login-page",H=[{title:m.a.forms.login.areYouTheNewUser,url:"/register",urlTitle:m.a.forms.__common__.doRegister},{title:m.a.forms.login.areYouForgetYourPassword,url:"/forgot-password",urlTitle:m.a.forms.login.doResetYourPassword}],K=[{componentType:n.input,name:"email",placeholder:m.a.forms.__common__.email,type:"email"},{componentType:n.passwordInput,name:"password"}],J=function(){var e=Object(l.c)((function(e){return e.user})).userLoginPhase,t=Object(l.b)(),r=Object(j.h)().state,n=(r=void 0===r?{}:r).redirectedFrom,i=void 0===n?"/":n;return Object(a.useEffect)((function(){return function(){[p.d.rejected].includes(e)&&t(Object(p.l)())}}),[t,e]),[p.d.fulfilled].includes(e)?Object(O.jsx)(j.a,{to:i}):Object(O.jsx)("div",{className:b()(g.a.page,g.a["page_".concat(Y)],Y),children:Object(O.jsx)(D,{additionalActions:H,inputDeclarations:K,buttonTitle:m.a.forms.__common__.doLogin,onSubmit:function(r){var n=r.email,a=r.password;[p.d.initial,p.d.rejected].includes(e)&&t(Object(p.n)({email:n,password:a}))},title:m.a.forms.login.title})})},V=function(){var e=Object(l.c)((function(e){return e.user})).userLoginPhase,t=Object(l.b)();return Object(a.useEffect)((function(){e===p.d.fulfilled&&t(Object(p.o)())})),[p.d.initial,p.d.pending,p.d.rejected].includes(e)?Object(O.jsx)(j.a,{to:"/login"}):null},G=r(362),W=r(162),z=r(357),Q=r(20),X=r(67),Z=r.n(X),$=function(e){var t,r=e.amount,n=e.className,a=e.isTotal;return Object(O.jsxs)("div",{className:b()(Z.a.amount,"text",(t={},Object(y.a)(t,Z.a.amount_type_total,a),Object(y.a)(t,"text_type_digits-default",!a),Object(y.a)(t,"text_type_digits-medium",a),t),n),children:[Object(O.jsx)("div",{className:Z.a.amount__amount,children:r}),Object(O.jsx)("div",{className:Z.a["amount__currency-wrapper"],children:Object(O.jsx)(N.CurrencyIcon,{type:"primary"})})]})},ee=r(81),te=r(27),re=r.n(te),ne=function(e){var t,r=e.className,n=Object(l.c)((function(e){return e.burger})),i=n.actualIngredients,s=n.idToIngredientMap,c=n.orderDetailsRequest,o=n.totalAmount,u=Object(l.c)((function(e){return e.user})).user,d=Object(l.b)(),_=Object(j.h)(),f=Object(j.g)(),g=i.slice(0,1)[0],h=i.slice(-1)[0],x=Object(a.useCallback)((function(){u?c||d(Object(p.q)(i.map((function(e){return e.refId})))):f.replace("/login")}),[i,d,f,c,u]),w=Object(z.a)({accept:Q.b.ingredient,canDrop:function(e,t){return!(0===i.length&&t.getItemType()===Q.b.ingredient&&e.type!==Q.c.bun)},drop:function(e){var t=e.refId;d(Object(p.f)(s[t]))},collect:function(e){return{isCanDrop:e.canDrop(),isDragOver:e.isOver()}}}),k=Object(v.a)(w,2),C=k[0],I=C.isCanDrop,T=C.isDragOver,P=k[1];return Object(O.jsxs)("div",{className:b()(re.a["burger-constructor"],"pt-25 pb-5",(t={},Object(y.a)(t,re.a["burger-constructor_is-empty"],0===i.length),Object(y.a)(t,re.a["burger-constructor_is-can-drop"],I),Object(y.a)(t,re.a["burger-constructor_is-drag-over"],T),t),r),children:[Object(O.jsxs)("div",{ref:P,className:re.a["burger-constructor__list"],children:[g&&Object(O.jsxs)(O.Fragment,{children:[function(){var e=g.isLocked,t=void 0!==e&&e,r=g.refId,n=g.type,a=s[r];return a&&Object(O.jsx)(ee.a,{ingredient:s[r],isLocked:t,onShowIngredientInfo:function(){f.push({pathname:"/ingredients/".concat(a._id),state:{backgroundPageLocation:_}})},type:n})}(),Object(O.jsx)("div",{className:"pt-4"})]}),Object(O.jsx)("div",{className:b()(re.a["burger-constructor__filling"],"custom-scroll"),children:i.slice(1,-1).map((function(e,t){var r=e.id,n=e.isLocked,a=void 0!==n&&n,i=e.refId,c=e.type,o=s[i];return o&&Object(O.jsx)(ee.a,{id:r,index:t+1,ingredient:s[i],isLocked:a,onShowIngredientInfo:function(){f.push({pathname:"/ingredients/".concat(o._id),state:{backgroundPageLocation:_}})},onDelete:function(){d(Object(p.s)(r))},type:c},r)}))}),h&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"pt-4"}),function(){var e=h.isLocked,t=void 0!==e&&e,r=h.refId,n=h.type,a=s[r];return a&&Object(O.jsx)(ee.a,{ingredient:s[r],isLocked:t,onShowIngredientInfo:function(){f.push({pathname:"/ingredients/".concat(a._id),state:{backgroundPageLocation:_}})},type:n})}()]})]}),Object(O.jsxs)("div",{className:b()(re.a["burger-constructor__total-wrapper"],"pt-10"),children:[Object(O.jsx)($,{amount:o,className:re.a["burger-constructor__total"],isTotal:!0}),Object(O.jsx)("div",{className:"pl-10"}),Object(O.jsx)(N.Button,{onClick:x,size:"large",type:"primary",children:m.a.placeAnOrder})]})]})},ae=r(10),ie=r(356),se=r(354),ce=r(43),oe=r.n(ce),ue=function(e){var t,r=e.ingredient,n=r._id,a=r.image,i=r.name,s=r.price,c=r.type,o=e.onClick,u=Object(l.c)((function(e){return e.burger})).idToActualIngredientsCountMap,d=Object(ie.a)({type:Q.b.ingredient,options:{dropEffect:"copy"},item:{refId:n,type:c},collect:function(e){return{isItPicked:e.isDragging()}}}),p=Object(v.a)(d,3),_=p[0].isItPicked,j=p[1],m=p[2];return Object(O.jsxs)("li",{ref:j,className:b()(oe.a["burger-ingredient"],(t={},Object(y.a)(t,oe.a["burger-ingredient_interactive"],o),Object(y.a)(t,oe.a["burger-ingredient_is-picked"],_),t)),onClick:o,children:[Object(O.jsx)(se.a,{connect:m,src:a}),u[n]&&Object(O.jsx)(N.Counter,{count:u[n]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:b()(oe.a["burger-ingredient__image-wrapper"],"pl-4 pr-4"),children:Object(O.jsx)("img",{alt:i,className:oe.a["burger-ingredient__image"],src:a})}),Object(O.jsx)($,{amount:s,className:b()(oe.a["burger-ingredient__price-wrapper"],"pt-1 pb-1")}),Object(O.jsx)("div",{className:b()(oe.a["burger-ingredient__title"]),children:i})]})]})},le=r(159),de=r.n(le),pe=function(e){var t=e.className,r=e.ingredients,n=e.title,a=e.type,s=Object(j.h)(),c=Object(j.g)();return Object(O.jsxs)("li",{className:b()("pt-10",t),"data-type":a,children:[Object(O.jsx)("div",{className:"text text_type_main-medium",children:n}),Object(O.jsx)("ul",{className:b()(de.a["burger-ingredient-type__ingredient-list"],"pt-6 pr-4 pl-4"),children:r.map((function(e,t){return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(ue,{ingredient:e,onClick:function(){c.push({pathname:"/ingredients/".concat(e._id),state:{backgroundPageLocation:s}})}}),Object(O.jsx)("li",{className:b()({"pl-6":t%2===0,"pt-8":t%2===1})})]},e._id)}))})]})},_e=r(44),be=r.n(_e),je={bun:m.a.buns,sauce:m.a.sauces,main:m.a.burgerFillings},me=Object.keys(je),fe=[].concat(Object(ae.a)(Array.from({length:49}).map((function(e,t){return t/49}))),[1]),ge=function(e){var t=e.className,r=Object(l.c)((function(e){return e.burger})).ingredients,n=Object(a.useState)(me[0]),i=Object(v.a)(n,2),s=i[0],c=i[1],o=Object(a.useMemo)((function(){var e=new Map;r.forEach((function(t){var r=t.type;e.has(r)||e.set(r,[]),e.get(r).push(t)}));var t=me.reduce((function(t,r){return e.has(r)?t.set(r,e.get(r)):t.set(r,[]),t}),new Map);return e.clear(),t}),[r]),u=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=u.current,t=e.querySelectorAll(".".concat(be.a["burger-ingredients__type-item"]));if(t.length>0){var r=new Map,n=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.target,n=e.intersectionRatio,a=t.dataset.type;a&&r.set(a,n)}));var t=Object(ae.a)(r.entries()).sort((function(e,t){var r=Object(v.a)(e,2)[1];return Object(v.a)(t,2)[1]-r}))[0][0];c(t)}),{root:e,threshold:fe});return t.forEach((function(e){r.set(e.dataset.type,0),n.observe(e)})),function(){n.disconnect(),r.clear()}}}),[]),Object(O.jsxs)("div",{className:b()(be.a["burger-ingredients"],"pb-5",t),children:[Object(O.jsx)("div",{className:b()(be.a["burger-ingredients__title"],"pt-10 pb-5 text text_type_main-large"),children:m.a.assembleABurger}),Object(O.jsx)("div",{className:b()(be.a["burger-ingredients__filter"]),children:me.map((function(e){return Object(O.jsx)(N.Tab,{active:s===e,value:e,onClick:function(e){var t=u.current;if(t){var r=t.querySelector(".".concat(be.a["burger-ingredients__type-item"],'[data-type="').concat(e,'"]'));r&&r.scrollIntoView({behavior:"smooth"})}},children:je[e]},e)}))}),Object(O.jsx)("ul",{ref:u,className:b()(be.a["burger-ingredients__type-list"],"custom-scroll"),children:Array.from(o.entries()).map((function(e){var t=Object(v.a)(e,2),r=t[0],n=t[1];return Object(O.jsx)(pe,{className:be.a["burger-ingredients__type-item"],ingredients:n,title:je[r],type:r},r)}))})]})},Oe=r(112),he=r.n(Oe),xe=function(e){var t=e.className,r=e.onClick;return Object(O.jsx)("div",{className:b()(he.a["modal-overlay"],Object(y.a)({},"".concat(he.a["modal-overlay_interactive"]),r),t),onClick:r})},ve=r(49),ye=r.n(ve),we=function(e){var t=e.children,r=e.className,n=e.onClose,i=e.title,s=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=s.current;e&&e.focus()}),[]);var c=Object(a.useCallback)((function(e){"Escape"===e.key&&n&&n()}),[n]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(xe,{className:ye.a.modal__overlay,onClick:n}),Object(O.jsxs)("div",{ref:s,className:b()(ye.a.modal,"p-10",r),onKeyDown:c,tabIndex:0,children:[Object(O.jsxs)("div",{className:ye.a.modal__header,children:[Object(O.jsx)("div",{className:b()(ye.a.modal__title," text text_type_main-large"),children:i}),Object(O.jsx)("button",{className:ye.a["modal__close-button"],onClick:n,children:Object(O.jsx)(N.CloseIcon,{type:"primary"})})]}),Object(O.jsx)("div",{className:ye.a.modal__content,children:t})]})]})},Ne=r(50),ke=r.n(Ne),Ce=function(e){var t=e.className,r=e.orderDetails,n=r.id,a=r.status,i=r.message;return Object(O.jsxs)("div",{className:b()(ke.a["order-details"],t),children:[Object(O.jsx)("div",{className:b()(ke.a["order-details__id"],"text text_type_digits-large"),children:String(n).padStart(6,"0")}),Object(O.jsx)("div",{className:"pt-8"}),Object(O.jsx)("div",{className:b()(ke.a["order-details__id-title"],"text text_type_main-medium"),children:m.a.orderId}),Object(O.jsx)("div",{className:"pt-15"}),Object(O.jsx)("div",{className:ke.a["order-details__status-icon-wrapper"],children:Object(O.jsx)(N.CheckMarkIcon,{type:"primary"})}),Object(O.jsx)("div",{className:"pt-15"}),Object(O.jsx)("div",{className:ke.a["order-details__status-title"],children:m.b[a]}),Object(O.jsx)("div",{className:"pt-2"}),Object(O.jsx)("div",{className:b()(ke.a["order-details__message"],"text_color_inactive"),children:i})]})},Ie=r(68),Te=r.n(Ie),Pe="main-page",Ee=function(){var e=Object(l.c)((function(e){return e.burger})).orderDetails,t=Object(l.b)();return Object(O.jsxs)("div",{className:b()(g.a.page,g.a["page_".concat(Pe)],Te.a["main-page"]),children:[Object(O.jsxs)(G.a,{backend:W.a,children:[Object(O.jsx)(ge,{className:Te.a["".concat(Pe,"__ingredients")]}),Object(O.jsx)("div",{className:b()(Te.a["".concat(Pe,"__space")],"pl-10")}),Object(O.jsx)(ne,{className:Te.a["".concat(Pe,"__constructor")]})]}),e&&Object(O.jsx)(we,{onClose:function(){return t(Object(p.v)())},children:Object(O.jsx)(Ce,{className:b()(re.a["burger-constructor__order-details"],"mt-4 mb-20"),orderDetails:e})})]})},De="not-found-page",Se=function(){return Object(O.jsx)("div",{className:b()(g.a.page,g.a["page_".concat(De)],De),children:"Not Found Page"})},Re=function(){return Object(O.jsx)("div",{children:"Orders Subpage"})},Le=r(34),Ae=[{componentType:n.input,icon:"EditIcon",name:"name",placeholder:m.a.forms.__common__.name,type:"text"},{componentType:n.input,icon:"EditIcon",name:"email",placeholder:m.a.forms.profile.email,type:"email"},{componentType:n.input,icon:"EditIcon",name:"password",placeholder:m.a.forms.__common__.password,type:"password"}],Fe=function(){var e=Object(l.c)((function(e){return e.user})),t=e.user,r=e.updateUserDataPhase,n=Object(l.b)();Object(a.useEffect)((function(){return function(){n(Object(p.k)())}}),[n]);var i=Object(a.useMemo)((function(){return t?Ae.map((function(e){var r=Object(Le.a)({},e);return Object.prototype.hasOwnProperty.call(t,e.name)&&(r.initialValue=t[e.name]),r})):Ae}),[t]);return Object(O.jsx)("div",{children:Object(O.jsx)(D,{inputDeclarations:i,isButtonHiddenOnNotModifiedForm:!0,buttonTitle:m.a.forms.profile.doEdit,onSubmit:function(e){var t=e.email,a=e.name,i=e.password;r===p.c.initial&&n(Object(p.w)({email:t,name:a,password:i}))},resetButtonTitle:m.a.forms.__common__.resetForm,showErrors:!0})})},qe=r(33),Me=r.n(qe),Be="profile-page",Ue=function(){var e=Object(l.c)((function(e){return e.user})).userTimeStamp,t=Object(j.j)().path,r=Object(j.j)({path:t,exact:!0}),n=Object(j.j)({path:"".concat(t,"/orders")});return Object(O.jsxs)("div",{className:b()(g.a.page,g.a["page_".concat(Be)],Me.a["profile-page"],"pt-25"),children:[Object(O.jsxs)("ul",{className:b()(Me.a["".concat(Be,"__menu")],"text_color_inactive"),children:[Object(O.jsx)("li",{className:b()(Me.a["".concat(Be,"__menu-item")],Object(y.a)({},Me.a["".concat(Be,"__menu-item-active")],r)),children:Object(O.jsx)(d.b,{className:Me.a["".concat(Be,"__link")],to:"".concat(t),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(O.jsx)("li",{className:b()(Me.a["".concat(Be,"__menu-item")],Object(y.a)({},Me.a["".concat(Be,"__menu-item-active")],n)),children:Object(O.jsx)(d.b,{className:Me.a["".concat(Be,"__link")],to:"".concat(t,"/orders"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(O.jsx)("li",{className:Me.a["".concat(Be,"__menu-item")],children:Object(O.jsx)(d.b,{className:Me.a["".concat(Be,"__link")],to:"/logout",children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(O.jsx)("div",{className:"pl-15"}),Object(O.jsx)("div",{className:Me.a["".concat(Be,"__content")],children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:"".concat(t),children:Object(O.jsx)(Fe,{},e)}),Object(O.jsx)(j.b,{path:"".concat(t,"/orders"),children:Object(O.jsx)(Re,{})}),Object(O.jsx)(j.b,{children:Object(O.jsx)(j.a,{to:t})})]})})]})},Ye="register-page",He=[{title:m.a.forms.register.areYouRegisteredAlready,url:"/login",urlTitle:m.a.forms.__common__.doLogin}],Ke=[{componentType:n.input,name:"name",placeholder:m.a.forms.__common__.name},{componentType:n.input,name:"email",placeholder:m.a.forms.__common__.email,type:"email"},{componentType:n.passwordInput,name:"password"}],Je=function(){var e=Object(l.c)((function(e){return e.user})),t=e.userLoginPhase,r=e.userRegistrationPhase,n=Object(l.b)();return Object(a.useEffect)((function(){return function(){n(Object(p.m)())}}),[n]),[p.d.fulfilled].includes(t)||[p.e.fulfilled,p.e.rejected].includes(r)?Object(O.jsx)(j.a,{to:"/login"}):Object(O.jsx)("div",{className:b()(g.a.page,g.a["page_".concat(Ye)],Ye),children:Object(O.jsx)(D,{additionalActions:He,inputDeclarations:Ke,buttonTitle:m.a.forms.__common__.doRegister,onSubmit:function(e){var t=e.email,a=e.name,i=e.password;r===p.e.initial&&n(Object(p.r)({email:t,name:a,password:i}))},showErrors:!0,title:m.a.forms.register.title})})},Ve="reset-password-page",Ge=[{title:m.a.forms.__common__.haveYouRememberedYourPassword,url:"/login",urlTitle:m.a.forms.__common__.doLogin}],We=[{componentType:n.passwordInput,name:"newPassword"},{componentType:n.input,name:"approvalCode",type:"text",placeholder:m.a.forms.resetPassword.provideApprovalCode}],ze=function(){var e=Object(l.c)((function(e){return e.user})),t=e.userLoginPhase,r=e.passwordResettingPhase,n=Object(l.b)();return Object(a.useEffect)((function(){return function(){n(Object(p.j)())}}),[n]),[p.d.fulfilled].includes(t)?Object(O.jsx)(j.a,{to:"/"}):[p.b.fulfilled,p.b.initial,p.b.rejected].includes(r)?Object(O.jsx)(j.a,{to:"/login"}):Object(O.jsx)("div",{className:b()(g.a.page,g.a["page_".concat(Ve)],Ve),children:Object(O.jsx)(D,{additionalActions:Ge,inputDeclarations:We,buttonTitle:m.a.forms.resetPassword.doReset,onSubmit:function(e){var t=e.newPassword,a=e.approvalCode;r===p.b.requestingCredentialsFromUser&&n(Object(p.t)({password:t,token:a}))},showErrors:!0,title:m.a.forms.resetPassword.title})})},Qe=r(164),Xe=["children"],Ze=function(e){var t=e.children,r=Object(Qe.a)(e,Xe),n=Object(l.c)((function(e){return e.user})).userLoginPhase,a=Object(j.h)().pathname;return Object(O.jsx)(j.b,Object(Le.a)(Object(Le.a)({},r),{},{render:function(){return n===p.d.fulfilled?t:Object(O.jsx)(j.a,{to:{pathname:"/login",state:{redirectedFrom:a}}})}}))},$e=r(160),et=r.n($e),tt=function(){var e=Object(j.h)(),t=Object(j.h)().state,r=(null!==t&&void 0!==t?t:{}).backgroundPageLocation,n=Object(j.g)();return r&&(e=r),Object(O.jsxs)("main",{className:b()(et.a["app-body"],"pl-5 pr-5 text text_type_main-default"),children:[Object(O.jsxs)(j.d,{location:e,children:[Object(O.jsx)(j.b,{exact:!0,path:"/",children:Object(O.jsx)(Ee,{})}),Object(O.jsx)(j.b,{exact:!0,path:"/login",children:Object(O.jsx)(J,{})}),Object(O.jsx)(j.b,{exact:!0,path:"/register",children:Object(O.jsx)(Je,{})}),Object(O.jsx)(j.b,{exact:!0,path:"/forgot-password",children:Object(O.jsx)(A,{})}),Object(O.jsx)(j.b,{exact:!0,path:"/reset-password",children:Object(O.jsx)(ze,{})}),Object(O.jsx)(j.b,{path:"/feed",children:Object(O.jsx)(x,{})}),Object(O.jsx)(Ze,{path:"/profile",children:Object(O.jsx)(Ue,{})}),Object(O.jsx)(j.b,{path:"/ingredients/:id",children:Object(O.jsx)(U,{})}),Object(O.jsx)(j.b,{path:"/logout",children:Object(O.jsx)(V,{})}),Object(O.jsx)(j.b,{children:Object(O.jsx)(Se,{})})]}),r?Object(O.jsx)(j.b,{path:"/ingredients/:id",children:Object(O.jsx)(we,{onClose:function(){return n.goBack()},title:m.a.ingredientDetails,children:Object(O.jsx)(M,{className:b()(re.a["burger-constructor__ingredient-details"])})})}):null]})},rt=r(114),nt=r.n(rt),at=function(e){var t=e.className,r=e.Icon,n=e.isActive,a=e.onClick,i=e.text;return Object(O.jsxs)("li",{className:b()(nt.a["menu-item"],Object(y.a)({},nt.a["menu-item_active"],n),t,"p-5 text",{text_color_inactive:!n}),onClick:a,role:"button",children:[Object(O.jsx)(r,{type:n?"primary":"secondary"}),Object(O.jsx)("span",{className:"ml-2",children:i})]})};at.defaultProps={isActive:!0};var it=r(51),st=r.n(it),ct=function(){var e,t=Object(j.g)(),r=Object(j.j)("/"),n=Object(j.j)("/feed"),a=Object(j.j)("/profile");return Object(O.jsx)("header",{className:b()(st.a["app-header"],"text text_type_main-default pt-3 pb-3"),children:Object(O.jsx)("nav",{children:Object(O.jsxs)("ul",{className:b()(st.a["app-header__menu-list"],"pt-4 pb-4"),children:[Object(O.jsx)(at,{className:st.a["app-header__menu-item"],Icon:N.BurgerIcon,isActive:null!==(e=r&&r.isExact)&&void 0!==e&&e,onClick:function(){t.push({pathname:"/"})},text:m.a.constructor}),Object(O.jsx)(at,{className:st.a["app-header__menu-item"],Icon:N.ListIcon,isActive:Boolean(n),onClick:function(){t.push({pathname:"/feed"})},text:m.a.orderList}),Object(O.jsx)("li",{className:st.a["app-header__logo-wrapper"],children:Object(O.jsx)(d.b,{to:"/",children:Object(O.jsx)(N.Logo,{})})}),Object(O.jsx)(at,{className:st.a["app-header__menu-item"],Icon:N.ProfileIcon,isActive:Boolean(a),onClick:function(){t.push({pathname:"/profile"})},text:m.a.profile})]})})})},ot=r(161),ut=r.n(ot),lt=function(){var e=Object(l.c)((function(e){return e.burger})),t=e.ingredientsError,r=e.ingredientsRequest,n=Object(l.c)((function(e){return e.user})).autoLoginPhase,i=Object(l.b)();return Object(a.useEffect)((function(){i(Object(p.i)())}),[i]),Object(a.useEffect)((function(){i(Object(p.h)())}),[i]),[p.a.fulfilled,p.a.rejected].includes(n)?Object(O.jsx)("div",{className:ut.a.app,children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(ct,{}),!r&&!t&&Object(O.jsx)(tt,{})]})}):null};r(352);c.a.render(Object(O.jsxs)(i.a.StrictMode,{children:[Object(O.jsx)(u.a,{store:l.a,children:Object(O.jsx)(lt,{})}),Object(O.jsx)("div",{id:"modal-container"})]}),document.getElementById("root")),o()},36:function(e,t,r){e.exports={form:"style_form__3d8HQ",form__header:"style_form__header__3sDZb",form__body:"style_form__body__2i5xi",form__errors:"style_form__errors__29KrO","form__buttons-container":"style_form__buttons-container__3hu67","form__button-wrapper":"style_form__button-wrapper__I3YEI","form__additional-actions":"style_form__additional-actions__3Z0Nm"}},38:function(e,t,r){e.exports={"ingredient-details":"style_ingredient-details__13xEY","ingredient-details__picture-wrapper":"style_ingredient-details__picture-wrapper__2n82A","ingredient-details__picture":"style_ingredient-details__picture__11V57","ingredient-details__title":"style_ingredient-details__title__WZMcA","ingredient-details__nutritional-values":"style_ingredient-details__nutritional-values__XSWu_","ingredient-details__nutritional-value":"style_ingredient-details__nutritional-value__1P1f6","ingredient-details__nutritional-value-title":"style_ingredient-details__nutritional-value-title__3110a","ingredient-details__nutritional-value-value":"style_ingredient-details__nutritional-value-value__2HErT"}},42:function(e,t,r){e.exports={"burger-constructor-item":"style_burger-constructor-item__6ndAy","burger-constructor-item_is-drag-over":"style_burger-constructor-item_is-drag-over__8rJ5N","burger-constructor-item_is-can-drop":"style_burger-constructor-item_is-can-drop__1ROm7","burger-constructor-item_is-picked":"style_burger-constructor-item_is-picked__bR2iz","burger-constructor-item__constructor-element-wrapper":"style_burger-constructor-item__constructor-element-wrapper__2ki39","burger-constructor-item_interactive":"style_burger-constructor-item_interactive__3QnkX"}},43:function(e,t,r){e.exports={"burger-ingredient":"style_burger-ingredient__It1Se","burger-ingredient_interactive":"style_burger-ingredient_interactive__3zkQq","burger-ingredient_is-picked":"style_burger-ingredient_is-picked__3Qo2E","burger-ingredient__image-wrapper":"style_burger-ingredient__image-wrapper__2P4Vw","burger-ingredient__price-wrapper":"style_burger-ingredient__price-wrapper__2td-g","burger-ingredient__title":"style_burger-ingredient__title__26qp_"}},44:function(e,t,r){e.exports={"burger-ingredients":"style_burger-ingredients__2mHyl","burger-ingredients__filter":"style_burger-ingredients__filter__1NLWy","burger-ingredients__type-list":"style_burger-ingredients__type-list__IM2C3","burger-ingredients__type-item":"style_burger-ingredients__type-item__1JXTu"}},49:function(e,t,r){e.exports={modal:"style_modal__vQxtL",modal__header:"style_modal__header__3dmqg",modal__title:"style_modal__title__14q9S","modal__close-button":"style_modal__close-button__3aKnX",modal__content:"style_modal__content__1zYdw"}},5:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return c}));var n,a=r(8),i=r(20),s=(n={},Object(a.a)(n,i.d.BEING_COOKED,"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"),Object(a.a)(n,i.d.COOKED,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d"),Object(a.a)(n,i.d.BEING_DELIVERED,"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f"),Object(a.a)(n,i.d.DELIVERED,"\u0417\u0430\u043a\u0430\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d"),n),c={assembleABurger:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440",bottom:"\u043d\u0438\u0437",buns:"\u0411\u0443\u043b\u043a\u0438",burgerFillings:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",calories:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",carbohydrates:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",constructor:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",fat:"\u0416\u0438\u0440\u044b, \u0433",ingredientDetails:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",orderId:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430",orderList:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",placeAnOrder:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437",profile:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",proteins:"\u0411\u0435\u043b\u043a\u0438, \u0433",sauces:"\u0421\u043e\u0443\u0441\u044b",top:"\u0432\u0435\u0440\u0445",forms:{__common__:{__errors__:{required:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",passwordLength:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},doHidePassword:"\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",doLogin:"\u0412\u043e\u0439\u0442\u0438",doRegister:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",doShowPassword:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",email:"E-mail",haveYouRememberedYourPassword:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",name:"\u0418\u043c\u044f",password:"\u041f\u0430\u0440\u043e\u043b\u044c",resetForm:"\u041e\u0442\u043c\u0435\u043d\u0430"},forgotPassword:{doResetPassword:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",provideYourEmail:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"},login:{areYouForgetYourPassword:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",areYouTheNewUser:"\u0412\u044b \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",doResetYourPassword:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",title:"\u0412\u0445\u043e\u0434"},profile:{doEdit:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",email:"\u041b\u043e\u0433\u0438\u043d"},register:{areYouRegisteredAlready:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},resetPassword:{doReset:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",provideApprovalCode:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",provideYourNewPassword:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}}}},50:function(e,t,r){e.exports={"order-details":"style_order-details__DhWNa","order-details__id":"style_order-details__id__31e3O","order-details__id-title":"style_order-details__id-title__3AKtK","order-details__status-icon-wrapper":"style_order-details__status-icon-wrapper__3cIJk","order-details__status-title":"style_order-details__status-title__3ORfi","order-details__message":"style_order-details__message__2ChKS"}},51:function(e,t,r){e.exports={"app-header":"style_app-header__C5Utm","app-header__menu-list":"style_app-header__menu-list__tOfh6","app-header__logo-wrapper":"style_app-header__logo-wrapper__2jy8W"}},6:function(e,t,r){"use strict";r.d(t,"i",(function(){return S})),r.d(t,"q",(function(){return R})),r.d(t,"g",(function(){return A})),r.d(t,"f",(function(){return q})),r.d(t,"p",(function(){return M})),r.d(t,"s",(function(){return B})),r.d(t,"v",(function(){return U})),r.d(t,"b",(function(){return n})),r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"h",(function(){return X})),r.d(t,"n",(function(){return Z})),r.d(t,"o",(function(){return $})),r.d(t,"r",(function(){return ee})),r.d(t,"t",(function(){return te})),r.d(t,"u",(function(){return re})),r.d(t,"w",(function(){return ne})),r.d(t,"x",(function(){return ie})),r.d(t,"j",(function(){return ce})),r.d(t,"k",(function(){return oe})),r.d(t,"l",(function(){return ue})),r.d(t,"m",(function(){return le}));var n,a,i,s,c,o=r(34),u=r(10),l=r(9),d=r(3),p=r.n(d),_=r(11),b=r(23),j=r(363),m=r(20),f="https://norma.nomoreparties.space",g=function(e){var t=e.accessToken,r=e.refreshToken,n=t.split(" "),a=Object(l.a)(n,2);return{accessSchema:a[0],accessToken:a[1],refreshToken:r}},O=function(){var e=Object(_.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/api/ingredients"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(!0!==(r=e.sent).success){e.next=10;break}return e.abrupt("return",r.data);case 10:throw new Error("Can't get data from server");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n,a,i,s,c,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.password,e.next=3,fetch("".concat(f,"/api/auth/login"),{body:JSON.stringify({email:r,password:n}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return a=e.sent,e.next=6,a.json();case 6:if(!0===(i=e.sent).success){e.next=9;break}throw new Error("Can't get data from server");case 9:return s=i.user,c=s.email,u=s.name,e.abrupt("return",Object(o.a)(Object(o.a)({},g(i)),{},{user:{email:c,name:u}}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.refreshToken,e.next=3,fetch("".concat(f,"/api/auth/logout"),{body:JSON.stringify({token:r}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!0===e.sent.success){e.next=9;break}throw new Error("Can't get data from server");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/api/orders"),{body:JSON.stringify({ingredients:t}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!0!==(n=e.sent).success){e.next=10;break}return e.abrupt("return",{id:n.order.number,message:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438",status:m.d.BEING_COOKED});case 10:throw new Error("Can't get data from server");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.refreshToken,e.next=3,fetch("".concat(f,"/api/auth/token"),{body:JSON.stringify({token:r}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!0!==(a=e.sent).success){e.next=11;break}return e.abrupt("return",g(a));case 11:throw new Error("Can't get data from server");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n,a,i,s,c,o,u,d,_,b,j,m,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.name,a=t.password,e.next=3,fetch("".concat(f,"/api/auth/register"),{body:JSON.stringify({email:r,name:n,password:a}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return i=e.sent,e.next=6,i.json();case 6:if(!0===(s=e.sent).success){e.next=9;break}throw new Error("Can't get data from server");case 9:return c=s.accessToken,o=s.refreshToken,u=s.user,d=u.email,_=u.name,b=c.split(" "),j=Object(l.a)(b,2),m=j[0],g=j[1],e.abrupt("return",{accessSchema:m,accessToken:g,refreshToken:o,user:{email:d,name:_}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,fetch("".concat(f,"/api/password-reset"),{body:JSON.stringify({email:r}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!0===e.sent.success){e.next=9;break}throw new Error("Can't get data from server");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.password,n=t.token,e.next=3,fetch("".concat(f,"/api/password-reset/reset"),{body:JSON.stringify({password:r,token:n}),headers:new Headers([["Content-Type","application/json"]]),method:"POST"});case 3:return a=e.sent,e.next=6,a.json();case 6:if(!0===e.sent.success){e.next=9;break}throw new Error("Can't get data from server");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n,a,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,n=r.accessSchema,a=r.accessToken,e.next=3,fetch("".concat(f,"/api/auth/user"),{headers:new Headers([["Content-Type","application/json"],["Authorization","".concat(n," ").concat(a)]]),method:"GET"});case 3:return i=e.sent,e.next=6,i.json();case 6:if(!0===(s=e.sent).success){e.next=9;break}throw new Error("Can't get data from server");case 9:return e.abrupt("return",s.user);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n,a,i,s,c,o,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,n=r.accessSchema,a=r.accessToken,i=t.data,s=i.email,c=i.name,o=i.password,e.next=3,fetch("".concat(f,"/api/auth/user"),{body:JSON.stringify({name:c,email:s,password:o}),headers:new Headers([["Content-Type","application/json"],["Authorization","".concat(n," ").concat(a)]]),method:"PATCH"});case 3:return u=e.sent,e.next=6,u.json();case 6:if(!0===(l=e.sent).success){e.next=9;break}throw new Error("Can't get data from server");case 9:return e.abrupt("return",{user:l.user});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){return Object(j.a)()},P={actualIngredients:[],idToActualIngredientsCountMap:{},idToIngredientMap:{},ingredients:[],ingredientsError:null,ingredientsRequest:!0,orderDetails:null,orderDetailsError:null,orderDetailsRequest:!1,totalAmount:0},E=function(e){var t=e.actualIngredients,r=e.idToIngredientMap;return t.map((function(e){return e.refId})).reduce((function(e,t){return e+r[t].price}),0)},D=function(e){return e.actualIngredients.reduce((function(e,t){return Object.prototype.hasOwnProperty.call(e,t.refId)?e[t.refId]+=1:e[t.refId]=1,e}),{})},S=Object(b.b)("burger/fetchIngredients",O),R=Object(b.b)("burger/placeAnOrder",function(){var e=Object(_.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}throw new Error("Unable to place an order for the empty ingredients list");case 2:return e.abrupt("return",v(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(b.c)({name:"burger",initialState:P,reducers:{addIngredient:function(e,t){var r=t.payload,n=e.actualIngredients,a=r._id;if(r.type===m.c.bun){var i=[m.a.top,m.a.bottom].map((function(e){return{id:T(),type:e,isLocked:!0,refId:a}})),s=Object(l.a)(i,2),c=s[0],o=s[1];e.actualIngredients=[c].concat(Object(u.a)(n.slice(1,-1)),[o])}else{var d=Object(u.a)(n);d.splice(-1,0,{id:T(),refId:a}),e.actualIngredients=d}e.totalAmount=E(e),e.idToActualIngredientsCountMap=D(e)},moveIngredient:function(e,t){var r=Object(l.a)(t.payload,2),n=r[0],a=r[1],i=e.actualIngredients,s=Object(u.a)(i);s.splice(a,0,s.splice(n,1)[0]),e.actualIngredients=s},removeIngredient:function(e,t){var r=t.payload,n=e.actualIngredients,a=e.actualIngredients.slice(1,-1);a.map((function(e){return e.id})).includes(r)&&(e.actualIngredients=[n[0]].concat(Object(u.a)(a.filter((function(e){return e.id!==r}))),[n[n.length-1]]),e.totalAmount=E(e),e.idToActualIngredientsCountMap=D(e))},resetOrderDetails:function(e){e.orderDetailsRequest||Object.assign(e,{orderDetails:null,orderDetailsError:null,orderDetailsRequest:!1})}},extraReducers:function(e){e.addCase(S.pending,(function(e){Object.assign(e,Object(o.a)(Object(o.a)({},P),{},{ingredientsRequest:!0}))})).addCase(S.fulfilled,(function(e,t){var r=t.payload,n={};r.forEach((function(e){n[e._id]=e})),Object.assign(e,{idToIngredientMap:n,ingredients:r,ingredientsRequest:!1})})).addCase(S.rejected,(function(e,t){var r=t.error;Object.assign(e,{ingredientsError:r,ingredientsRequest:!1})})),e.addCase(R.pending,(function(e){Object.assign(e,{orderDetails:null,orderDetailsError:null,orderDetailsRequest:!0})})).addCase(R.fulfilled,(function(e,t){var r=t.payload;e.orderDetailsRequest=!1,e.orderDetails=r,e.actualIngredients=[],e.totalAmount=E(e),e.idToActualIngredientsCountMap=D(e)})).addCase(R.rejected,(function(e,t){var r=t.error;Object.assign(e,{orderDetailsError:r,orderDetailsRequest:!1})}))}}),A=L.reducer,F=L.actions,q=F.addIngredient,M=F.moveIngredient,B=F.removeIngredient,U=F.resetOrderDetails,Y=r(8),H=r(163),K="authRefreshToken",J=new H.a,V=function(e){var t=e.accessSchema,r=e.accessToken,n=e.refreshToken,a={accessSchema:t,accessToken:r};Object.entries(a).forEach((function(e){var t=Object(l.a)(e,2),r=t[0],n=t[1];return J.set(r,n,{path:"/"})})),localStorage.setItem(K,n)},G=function(){return["accessSchema","accessToken"].reduce((function(e,t){return Object.assign(e,Object(Y.a)({},t,J.get(t)))}),{})},W=function(){return localStorage.authRefreshToken},z=function(e,t){e.user=t,e.userTimeStamp=(new Date).getTime()};!function(e){e.initial="initial",e.requestingApprovalCode="requesting-approval-code",e.requestingCredentialsFromUser="requesting-credentials-from-user",e.pendingResetting="pending-resetting",e.fulfilled="fulfilled",e.rejected="rejected"}(n||(n={})),function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(a||(a={})),function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(i||(i={})),function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(s||(s={})),function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(c||(c={}));var Q={autoLoginPhase:c.initial,passwordResettingPhase:n.initial,userLoginPhase:i.initial,userRegistrationPhase:a.initial,updateUserDataPhase:s.initial},X=Object(b.b)("user/doAutoLogin",Object(_.a)(p.a.mark((function e(){var t,r,n,a,i,s,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=G(),r=t.accessSchema,n=t.accessToken,r&&n){e.next=3;break}throw new Error("Action cannot be handled");case 3:return e.prev=3,e.next=6,C({auth:{accessSchema:r,accessToken:n}});case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),"jwt expired"===e.t0.message){e.next=13;break}throw e.t0;case 13:if(a=W()){e.next=16;break}throw e.t0;case 16:return e.next=18,y({refreshToken:a});case 18:return i=e.sent,V(i),s=G(),c=s.accessSchema,o=s.accessToken,e.abrupt("return",C({auth:{accessSchema:c,accessToken:o}}));case 22:case"end":return e.stop()}}),e,null,[[3,9]])})))),Z=Object(b.b)("user/login",h),$=Object(b.b)("user/logout",Object(_.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=W())){e.next=3;break}return e.abrupt("return",x({refreshToken:t}));case 3:case"end":return e.stop()}}),e)})))),ee=Object(b.b)("user/registerUser",w),te=Object(b.b)("user/requestNewPasswordSetting",k),re=Object(b.b)("user/requestPasswordResettingForEmail",N),ne=Object(b.b)("user/updateUserData",function(){var e=Object(_.a)(p.a.mark((function e(t){var r,n,a,i,s,c,o,u,l,d,_;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.email,n=t.name,a=t.password,i=G(),s=i.accessSchema,c=i.accessToken,s&&c){e.next=4;break}throw new Error("Action cannot be handled");case 4:return e.prev=4,e.next=7,I({auth:{accessSchema:s,accessToken:c},data:{email:r,name:n,password:a}});case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),"jwt expired"===e.t0.message){e.next=14;break}throw e.t0;case 14:if(o=W()){e.next=17;break}throw e.t0;case 17:return e.next=19,y({refreshToken:o});case 19:return u=e.sent,V(u),l=G(),d=l.accessSchema,_=l.accessToken,e.abrupt("return",I({auth:{accessSchema:d,accessToken:_},data:{email:r,name:n,password:a}}));case 23:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()),ae=Object(b.c)({name:"user",initialState:Q,reducers:{interruptPasswordResettingWorkflow:function(e){e.passwordResettingPhase=n.initial},interruptUpdateUserData:function(e){e.updateUserDataPhase=s.initial},interruptUserLogin:function(e){e.userLoginPhase=i.initial},interruptUserRegistration:function(e){e.userRegistrationPhase=a.initial}},extraReducers:function(e){e.addCase(re.pending,(function(e){e.passwordResettingPhase=n.requestingApprovalCode})).addCase(re.fulfilled,(function(e){e.passwordResettingPhase=n.requestingCredentialsFromUser})).addCase(re.rejected,(function(e){e.passwordResettingPhase=n.initial})),e.addCase(te.pending,(function(e){e.passwordResettingPhase=n.pendingResetting})).addCase(te.fulfilled,(function(e){e.passwordResettingPhase=n.fulfilled})).addCase(te.rejected,(function(e){e.passwordResettingPhase=n.rejected})),e.addCase(ee.pending,(function(e){e.userRegistrationPhase=a.pending})).addCase(ee.fulfilled,(function(e,t){var r=t.payload;V(r),e.userRegistrationPhase=a.fulfilled,z(e,r.user)})).addCase(ee.rejected,(function(e){e.userRegistrationPhase=a.rejected})),e.addCase(Z.pending,(function(e){e.userLoginPhase=i.pending})).addCase(Z.fulfilled,(function(e,t){var r=t.payload;V(r),e.userLoginPhase=i.fulfilled,z(e,r.user)})).addCase(Z.rejected,(function(e){e.userLoginPhase=i.rejected})),e.addCase($.pending,(function(){})).addCase($.fulfilled,(function(e){localStorage.removeItem(K),["accessSchema","accessToken"].forEach((function(e){return J.remove(e)})),function(e){delete e.user,delete e.userTimeStamp}(e),e.userLoginPhase=i.initial})).addCase($.rejected,(function(){})),e.addCase(ne.pending,(function(e){e.updateUserDataPhase=s.pending})).addCase(ne.fulfilled,(function(e,t){var r=t.payload;z(e,r.user),e.updateUserDataPhase=s.fulfilled})).addCase(ne.rejected,(function(e){e.updateUserDataPhase=s.rejected})),e.addCase(X.pending,(function(e){e.autoLoginPhase=c.pending})).addCase(X.fulfilled,(function(e,t){var r=t.payload;e.autoLoginPhase=c.fulfilled,e.userLoginPhase=i.fulfilled,z(e,r)})).addCase(X.rejected,(function(e){e.autoLoginPhase=c.rejected}))}}),ie=ae.reducer,se=ae.actions,ce=se.interruptPasswordResettingWorkflow,oe=se.interruptUpdateUserData,ue=se.interruptUserLogin,le=se.interruptUserRegistration},67:function(e,t,r){e.exports={amount:"style_amount__2_jh4",amount_type_total:"style_amount_type_total__pvRzS",amount__amount:"style_amount__amount__315ja","amount__currency-wrapper":"style_amount__currency-wrapper__2m355"}},68:function(e,t,r){e.exports={"main-page":"style_main-page__Jmc7f","main-page__ingredients":"style_main-page__ingredients__1V60h","main-page__constructor":"style_main-page__constructor__UVP6s","main-page__space":"style_main-page__space__3sPGu"}},7:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return s}));var n=r(23),a=r(66),i=r(6),s=Object(n.a)({devTools:!1,reducer:{burger:i.g,user:i.x}}),c=function(){return Object(a.b)()},o=function(e){return Object(a.c)(e)}},81:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return g}));var n=r(8),a=r(9),i=(r(0),r(2)),s=r.n(i),c=r(356),o=r(357),u=r(354),l=r(16),d=r(20),p=r(5),_=r(7),b=r(6),j=r(42),m=r.n(j),f=r(1),g=function(t){var r,i=t.className,j=t.index,g=t.ingredient,O=(g._id,g.image),h=g.name,x=g.price,v=t.isLocked,y=t.onShowIngredientInfo,w=t.onDelete,N=t.type,k=Object(_.b)(),C=Object(c.a)({type:d.b.actualIngredient,canDrag:!v,item:{index:j},collect:function(e){return{isItPicked:e.isDragging()}}}),I=Object(a.a)(C,3),T=I[0].isItPicked,P=I[1],E=I[2],D=Object(o.a)({accept:d.b.actualIngredient,canDrop:function(){return!v},collect:function(e){return{isCanDrop:e.canDrop(),isDragOver:e.isOver()}},hover:function(t){var r=t.index;j!==r&&null!=j&&(t.index=j,e((function(){k(Object(b.p)([r,j]))})))}}),S=Object(a.a)(D,2),R=S[0],L=R.isCanDrop,A=R.isDragOver,F=S[1];return Object(f.jsxs)("div",{ref:F,className:s()(m.a["burger-constructor-item"],(r={},Object(n.a)(r,m.a["burger-constructor-item_interactive"],y),Object(n.a)(r,m.a["burger-constructor-item_is-picked"],T),Object(n.a)(r,m.a["burger-constructor-item_is-can-drop"],L),Object(n.a)(r,m.a["burger-constructor-item_is-drag-over"],A),Object(n.a)(r,"pt-4",!v),r),i),onClick:function(e){var t=e.target;y&&t.closest(".".concat(m.a["burger-constructor-item__constructor-element-wrapper"]))&&!t.closest(".constructor-element__action")&&y()},children:[v?Object(f.jsx)("div",{className:"pl-8"}):Object(f.jsx)("div",{ref:P,children:Object(f.jsx)(l.DragIcon,{type:"primary"})}),Object(f.jsx)(u.a,{connect:E,src:O}),Object(f.jsx)("div",{className:"pl-6"}),Object(f.jsx)("div",{className:m.a["burger-constructor-item__constructor-element-wrapper"],children:Object(f.jsx)(l.ConstructorElement,{handleClose:w,isLocked:v,price:x,text:"".concat(h).concat(N?" (".concat(N===d.a.top?p.a.top:p.a.bottom,")"):""),thumbnail:O,type:N})})]})}}).call(this,r(349).setImmediate)}},[[353,1,2]]]);
//# sourceMappingURL=main.2f53f52d.chunk.js.map